"use strict";(self["webpackChunkv2_client"]=self["webpackChunkv2_client"]||[]).push([[146],{9146:function(e,t,s){s.r(t),s.d(t,{default:function(){return Ve}});var l=s(6768),a=s(4232),o=s(5130);const n={class:"container mt-5",style:{height:"800px","overflow-y":"auto"}},i={class:"row justify-content-center"},d={class:"col-md-7 col-lg-8"},r=(0,l.Lk)("h4",{class:"mb-3"},"가게정보 수정",-1),u={id:"imagePreview"},c=["src"],m={class:"row g-3"},h={class:"col-sm-6"},p=(0,l.Lk)("label",{for:"ShopName",class:"form-label"},"상호명:",-1),f=["value"],b=(0,l.Lk)("div",{class:"invalid-feedback"},"Valid first name is required.",-1),k={class:"col-sm-6"},g=(0,l.Lk)("label",{for:"category",class:"form-label"},"분류:",-1),L=["value"],v=(0,l.Lk)("div",{class:"invalid-feedback"},"Valid last name is required.",-1),y={class:"col-12"},M=(0,l.Lk)("label",{for:"time",class:"form-label"},"운영시간",-1),x=(0,l.Lk)("div",{class:"invalid-feedback"},"시간을 입력해주세요.",-1),w={class:"form-group col-md-5"},C=(0,l.Lk)("label",{for:"my_number"},"전화번호",-1),_=["value"],U={class:"col-12"},E=(0,l.Lk)("label",{for:"address",class:"form-label"},"주소",-1),I=["value"],N=(0,l.Lk)("div",{class:"invalid-feedback"}," Please enter your shipping address. ",-1),B=(0,l.Lk)("button",{type:"submit",class:"btn btn-primary"},"저장",-1);function A(e,t,s,A,D,S){const P=(0,l.g2)("B_MenuPlusMD"),X=(0,l.g2)("B_MenuPluse");return(0,l.uX)(),(0,l.CE)("div",n,[(0,l.Lk)("div",i,[(0,l.Lk)("div",d,[r,(0,l.Lk)("h2",null,(0,a.v_)(D.shop.sname),1),(0,l.Lk)("div",u,[D.shop.simg1?((0,l.uX)(),(0,l.CE)("img",{key:0,src:D.shop.simg1,class:"rounded mx-auto d-block",style:{"max-width":"100%","max-height":"300px"}},null,8,c)):(0,l.Q3)("",!0)]),(0,l.Lk)("form",{class:"needs-validation",onSubmit:t[2]||(t[2]=(0,o.D$)(((...e)=>S.submitForm&&S.submitForm(...e)),["prevent"]))},[(0,l.Lk)("div",m,[(0,l.Lk)("div",h,[p,(0,l.Lk)("input",{type:"text",class:"form-control",id:"ShopName",value:e.shopName,readonly:"",disabled:""},null,8,f),b]),(0,l.Lk)("div",k,[g,(0,l.Lk)("input",{type:"text",class:"form-control",id:"category",value:e.category,readonly:"",disabled:""},null,8,L),v]),(0,l.Lk)("div",y,[M,(0,l.bo)((0,l.Lk)("input",{type:"text",class:"form-control",id:"start",placeholder:"운영시작시간","onUpdate:modelValue":t[0]||(t[0]=t=>e.start=t),required:""},null,512),[[o.Jo,e.start]]),(0,l.bo)((0,l.Lk)("input",{type:"text",class:"form-control",id:"end",placeholder:"운영종료시간","onUpdate:modelValue":t[1]||(t[1]=t=>e.end=t),required:""},null,512),[[o.Jo,e.end]]),x]),(0,l.Lk)("div",w,[C,(0,l.Lk)("input",{type:"tel",class:"form-control",name:"my_number",id:"my_pnumber",maxlength:"13",placeholder:"전화번호",value:D.shop.stel,readonly:"",disabled:""},null,8,_)]),(0,l.Lk)("div",U,[E,(0,l.Lk)("input",{type:"text",class:"form-control",id:"address",value:D.shop.saddr,readonly:"",disabled:""},null,8,I),N]),(0,l.bF)(P,{bnum:D.bnum},null,8,["bnum"]),(0,l.bF)(X,{bnum:D.bnum,onMenuSelected:e.handleMenuSelected},null,8,["bnum","onMenuSelected"]),B])],32)])])])}const D={class:"card-body"},S={class:"card-title"},P={class:"card-text"},X={class:"card-text"},V=["onClick"],F=["onClick"],q={key:0,class:"card",style:{width:"18rem"}},R={class:"card-body"},J=(0,l.Lk)("h5",{class:"card-title"},"메뉴 수정",-1),$={id:"imagePreview"},Q=["src"],z={id:"MenuImg",class:"custom-file"},Y=(0,l.Lk)("label",{class:"custom-file-label",for:"customFile"},[(0,l.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"50",height:"50",fill:"currentColor",class:"bi bi-card-image",viewBox:"0 0 16 16"},[(0,l.Lk)("path",{d:"M6.002 5.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0"}),(0,l.Lk)("path",{d:"M1.5 2A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h13a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2zm13 1a.5.5 0 0 1 .5.5v6l-3.775-1.947a.5.5 0 0 0-.577.093l-3.71 3.71-2.66-1.772a.5.5 0 0 0-.63.062L1.002 12v.54L1 12.5v-9a.5.5 0 0 1 .5-.5z"})])],-1),j=(0,l.Lk)("br",null,null,-1),K={id:"imagePreview"},T=["src"],G=(0,l.Lk)("p",null,"메뉴 설명",-1),H=(0,l.Lk)("label",{for:"optionYes"},"옵션 추가",-1),O=(0,l.Lk)("label",{for:"optionNo"},"옵션 추가 안 함",-1);function W(e,t,s,n,i,d){return(0,l.uX)(),(0,l.CE)("div",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(i.menus,((e,s)=>((0,l.uX)(),(0,l.CE)("div",{class:"card",key:s},[(0,l.Lk)("div",D,[(0,l.Lk)("h5",S,(0,a.v_)(e.fname),1),(0,l.Lk)("p",P,(0,a.v_)(e.fprice.toLocaleString())+" 원",1),(0,l.Lk)("p",X,(0,a.v_)(e.finfo),1),(0,l.Lk)("div",null,[(0,l.Lk)("button",{class:"btn btn-primary",onClick:e=>d.toggleEditCard(s)},(0,a.v_)(i.showEditCardIndex===s?"닫기":"수정하기"),9,V),(0,l.Lk)("button",{class:"btn btn-danger",onClick:t=>d.confirmDelete(e.fnum)}," 삭제 ",8,F)])]),i.showEditCardIndex===s?((0,l.uX)(),(0,l.CE)("div",q,[(0,l.Lk)("div",R,[J,(0,l.Lk)("div",$,[i.editedMenu.fimg?((0,l.uX)(),(0,l.CE)("img",{key:0,src:i.editedMenu.fimg,class:"rounded mx-auto d-block",style:{"max-width":"100%","max-height":"300px"}},null,8,Q)):(0,l.Q3)("",!0)]),(0,l.Lk)("div",z,[(0,l.Lk)("input",{id:"customFile",type:"file",ref_for:!0,ref:"image",onChange:t[0]||(t[0]=(...e)=>d.upload&&d.upload(...e))},null,544),Y]),j,(0,l.Lk)("div",K,[i.imageUrl?((0,l.uX)(),(0,l.CE)("img",{key:0,src:i.imageUrl,class:"rounded mx-auto d-block",style:{"max-width":"100%","max-height":"300px"}},null,8,T)):(0,l.Q3)("",!0)]),(0,l.bo)((0,l.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[1]||(t[1]=e=>i.editedMenu.fname=e),required:""},null,512),[[o.Jo,i.editedMenu.fname]]),(0,l.bo)((0,l.Lk)("input",{type:"number",class:"form-control","onUpdate:modelValue":t[2]||(t[2]=e=>i.editedMenu.fprice=e),required:""},null,512),[[o.Jo,i.editedMenu.fprice]]),G,(0,l.bo)((0,l.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[3]||(t[3]=e=>i.editedMenu.finfo=e),required:""},null,512),[[o.Jo,i.editedMenu.finfo]]),(0,l.Lk)("div",null,[(0,l.bo)((0,l.Lk)("input",{type:"radio",id:"optionYes",class:"form-check-input","onUpdate:modelValue":t[4]||(t[4]=e=>i.editedMenu.foption=e),value:"1"},null,512),[[o.XL,i.editedMenu.foption]]),H,(0,l.bo)((0,l.Lk)("input",{type:"radio",id:"optionNo",class:"form-check-input","onUpdate:modelValue":t[5]||(t[5]=e=>i.editedMenu.foption=e),value:"2"},null,512),[[o.XL,i.editedMenu.foption]]),O]),(0,l.Lk)("button",{class:"btn btn-success",onClick:t[6]||(t[6]=(...e)=>d.saveChanges&&d.saveChanges(...e))},"저장")])])):(0,l.Q3)("",!0)])))),128))])}var Z=s(8355),ee={name:"B_MenuPluse",props:["bnum"],data(){return{menus:[],showEditCardIndex:-1,editedMenu:{fname:"",fprice:0,finfo:"",foption:"1",fimg:this.imageUrl},imageUrl:null,img:null}},created(){this.menuList()},methods:{async menuList(){try{const e=await Z.A.get(`/B_MenuInfo?bnum=${this.bnum}`);this.menus=e.data.sort(((e,t)=>new Date(t.fnum)-new Date(e.fnum))),console.log("Response: ",e.data),console.log("Menus: ",this.menus)}catch(e){console.log("Error fetching menus:",e)}},async upload(){if(this.image=this.$refs.image[0].files[0],console.log(this.image),!this.image)return;const e=new FileReader;e.onload=e=>{this.imageUrl=e.target.result},e.readAsDataURL(this.image)},toggleEditCard(e){this.showEditCardIndex=this.showEditCardIndex===e?-1:e,this.editedMenu=-1===this.showEditCardIndex?{}:{...this.menus[e]},console.log("ShowEditCardIndex: ",this.showEditCardIndex),console.log("EditedMenu: ",this.editedMenu)},async saveChanges(){try{const e=await Z.A.post("/B_MenuReUpdate",this.editedMenu);console.log("Response from B_MenuReUpdate:",e.data),await this.menuList(),this.showEditCardIndex=-1,this.image&&(this.editedMenu.fimg=this.imageUrl),console.log("Menu saved successfully.")}catch(e){console.error("Error saving changes:",e)}},async confirmDelete(e){confirm("정말 삭제하시겠습니까?")&&await this.deleteMenu(e)},async deleteMenu(e){try{const t=await Z.A.post("/B_MenuDelete",{fnum:e});console.log("Response from B_MenuDelete:",t.data),await this.menuList(),console.log("Menu deleted successfully."),alert("삭제되었습니다.")}catch(t){console.error("Error deleting menu:",t)}}}},te=s(1241);const se=(0,te.A)(ee,[["render",W]]);var le=se;const ae=(0,l.Lk)("button",{type:"button",class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#B_MenuPlus"}," 메뉴 추가하기 ",-1),oe={class:"modal fade",id:"B_MenuPlus",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},ne={class:"modal-dialog"},ie={class:"modal-content"},de=(0,l.Lk)("div",{class:"modal-header"},[(0,l.Lk)("h1",{class:"modal-title fs-5",id:"exampleModalLabel"}," 메뉴 추가하기 "),(0,l.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),re={class:"modal-body"},ue={class:"mb-2"},ce=(0,l.Lk)("label",{for:"menuName",class:"form-label"},"메뉴 이름",-1),me={class:"mb-3"},he=(0,l.Lk)("label",{for:"menuDescription",class:"form-label"},"메뉴 설명",-1),pe={class:"mb-3"},fe=(0,l.Lk)("label",{for:"menuPrice",class:"form-label"},"메뉴 가격",-1),be={key:0,class:"text-danger"},ke={id:"MenuImg",class:"custom-file"},ge=(0,l.Lk)("label",{class:"custom-file-label",for:"customFile"},[(0,l.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"50",height:"50",fill:"currentColor",class:"bi bi-card-image",viewBox:"0 0 16 16"},[(0,l.Lk)("path",{d:"M6.002 5.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0"}),(0,l.Lk)("path",{d:"M1.5 2A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h13a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2zm13 1a.5.5 0 0 1 .5.5v6l-3.775-1.947a.5.5 0 0 0-.577.093l-3.71 3.71-2.66-1.772a.5.5 0 0 0-.63.062L1.002 12v.54L1 12.5v-9a.5.5 0 0 1 .5-.5z"})])],-1),Le=(0,l.Lk)("br",null,null,-1),ve={id:"imagePreview"},ye=["src"],Me={class:"mb-3"},xe=(0,l.Lk)("label",{class:"form-check-label"},"옵션 추가 여부:",-1),we={class:"form-check"},Ce=(0,l.Lk)("label",{for:"optionYes",class:"form-check-label"},"옵션 추가",-1),_e={class:"form-check"},Ue=(0,l.Lk)("label",{for:"optionNo",class:"form-check-label"},"옵션 추가 안 함",-1),Ee={class:"modal-footer"},Ie=(0,l.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1),Ne=["disabled"];function Be(e,t,s,a,n,i){return(0,l.uX)(),(0,l.CE)("div",null,[ae,(0,l.Lk)("div",oe,[(0,l.Lk)("div",ne,[(0,l.Lk)("div",ie,[de,(0,l.Lk)("div",re,[(0,l.Lk)("form",{onSubmit:t[7]||(t[7]=(0,o.D$)(((...e)=>i.saveChanges&&i.saveChanges(...e)),["prevent"]))},[(0,l.Lk)("div",ue,[ce,(0,l.bo)((0,l.Lk)("input",{type:"text",class:"form-control",id:"menuName","onUpdate:modelValue":t[0]||(t[0]=e=>n.fname=e),required:""},null,512),[[o.Jo,n.fname]])]),(0,l.Lk)("div",me,[he,(0,l.bo)((0,l.Lk)("textarea",{class:"form-control",id:"menuDescription","onUpdate:modelValue":t[1]||(t[1]=e=>n.finfo=e),required:""},null,512),[[o.Jo,n.finfo]])]),(0,l.Lk)("div",pe,[fe,(0,l.bo)((0,l.Lk)("input",{type:"text",class:"form-control",id:"menuPrice","onUpdate:modelValue":t[2]||(t[2]=e=>n.fprice=e),required:"",pattern:"[0-9,]+",onInput:t[3]||(t[3]=(...e)=>i.checkIfNumber&&i.checkIfNumber(...e))},null,544),[[o.Jo,n.fprice]]),n.isNumber?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)("div",be," 숫자만 입력해주세요. "))]),(0,l.Lk)("div",ke,[(0,l.Lk)("input",{id:"customFile",type:"file",ref:"image",onChange:t[4]||(t[4]=(...e)=>i.upload&&i.upload(...e))},null,544),ge]),Le,(0,l.Lk)("div",ve,[n.imageUrl?((0,l.uX)(),(0,l.CE)("img",{key:0,src:n.imageUrl,class:"rounded mx-auto d-block",style:{"max-width":"100%","max-height":"300px"}},null,8,ye)):(0,l.Q3)("",!0)]),(0,l.Lk)("div",Me,[xe,(0,l.Lk)("div",we,[(0,l.bo)((0,l.Lk)("input",{type:"radio",id:"optionYes",class:"form-check-input","onUpdate:modelValue":t[5]||(t[5]=e=>n.foption=e),value:"1"},null,512),[[o.XL,n.foption]]),Ce]),(0,l.Lk)("div",_e,[(0,l.bo)((0,l.Lk)("input",{type:"radio",id:"optionNo",class:"form-check-input","onUpdate:modelValue":t[6]||(t[6]=e=>n.foption=e),value:"2"},null,512),[[o.XL,n.foption]]),Ue])])],32)]),(0,l.Lk)("div",Ee,[Ie,(0,l.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t[8]||(t[8]=(...e)=>i.saveChanges&&i.saveChanges(...e)),disabled:!n.isNumber}," Save changes ",8,Ne)])])])])])}var Ae={name:"B_MenuPlusMD",props:["bnum","fnum"],data(){return{fname:"",finfo:"",fprice:"",foption:"2",isNumber:!0,image:null,imageUrl:null}},methods:{checkIfNumber(){const e=this.fprice.replace(/\D/g,"");this.fprice=Number(e).toLocaleString(),this.isNumber=/^[0-9,]+$/.test(e)},async saveChanges(){if(!this.isNumber)return;const e={fname:this.fname,finfo:this.finfo,fprice:this.fprice.replace(/,/g,""),foption:this.foption,bnum:this.bnum,fimg:this.imageUrl};Z.A.post("/MenuInsert",e,{}).then((e=>{console.log("메뉴 추가 성공:",e.data)})).catch((e=>{console.error("메뉴 추가 실패:",e)}))},async upload(){if(this.image=this.$refs.image.files[0],console.log(this.image),!this.image)return;const e=new FileReader;e.onload=e=>{this.imageUrl=e.target.result},e.readAsDataURL(this.image)}}};const De=(0,te.A)(Ae,[["render",Be]]);var Se=De,Pe={name:"B_ShopRevise",components:{B_MenuPlusMD:Se,B_MenuPluse:le},data(){return{shop:[],bnum:1003}},created(){this.fetchStoreInfo(this.bnum)},methods:{handleMenuSaved(){console.log("메뉴가 저장되었습니다.")},fetchStoreInfo(e){Z.A.get(`/B_ShopDetail?bnum=${e}`).then((e=>{this.shop=e.data,this.shopName=this.shop.sname,this.category=this.shop.fcategory_mikey,this.phoneNumber=this.shop.stel,this.address=this.shop.saddr,this.start=this.shop.start_time,this.end=this.shop.end_time})).catch((e=>{console.error("가게 정보 가져오기 실패:",e)}))},submitForm(){const e={bnum:this.bnum,start_time:this.start,end_time:this.end};Z.A.post("/B_ShopTimeUpdate",e).then((e=>{console.log("서버 응답:",e.data)})).catch((e=>{console.error("서버 요청 실패:",e)}))}}};const Xe=(0,te.A)(Pe,[["render",A]]);var Ve=Xe}}]);
//# sourceMappingURL=146.b8626985.js.map