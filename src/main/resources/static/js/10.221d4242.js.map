{"version":3,"file":"js/10.221d4242.js","mappings":"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","sources":["webpack://v2_client/./src/views/business/JH_B_UpdateInfo.vue","webpack://v2_client/./src/views/business/JH_B_UpdateInfo.vue?76e3"],"sourcesContent":["<template>\n  <div class=\"container mt-5\">\n    <!-- 사업자 -->\n    <h2 class=\"mb-4\">개인정보수정</h2>\n    <form @submit.prevent=\"submitForm\">\n      <div class=\"mb-3\">\n        <label for=\"Mname\" class=\"form-label\">이름</label>\n        <input\n          type=\"text\"\n          v-model=\"mname\"\n          class=\"form-control\"\n          id=\"mname\"\n          required\n          disabled\n        />\n      </div>\n    </form>\n    <div class=\"mb-3\">\n      <label for=\"memail\" class=\"form-label\">이메일</label>\n      <input\n        type=\"memail\"\n        v-model=\"memail\"\n        class=\"form-control\"\n        id=\"memail\"\n        required\n        disabled\n      />\n    </div>\n    <div class=\"mb-3\">\n      <label for=\"mtel\" class=\"form-label\">연락처</label>\n      <input\n        type=\"tel\"\n        v-model=\"mtel\"\n        class=\"form-control\"\n        id=\"mtel\"\n        pattern=\"[0-9]{3}-[0-9]{4}-[0-9]{4}\"\n        required\n        @input=\"enableTelChange\"\n      />\n      <small class=\"text-muted\">예시: 010-1234-5678</small>\n    </div>\n    <div class=\"form-buttons\">\n      <button\n        type=\"submit\"\n        class=\"btn btn-primary withdraw\"\n        @click=\"updateAccountStatus\"\n      >\n        탈퇴하기\n      </button>\n      <button\n        type=\"submit\"\n        class=\"btn btn-primary\"\n        @click=\"updateUserInfo\"\n        :disabled=\"!isTelChanged\"\n      >\n        수정하기\n      </button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\n\nexport default {\n  data() {\n    return {\n      mnum: \"\",\n      mname: \"\",\n      mnic: \"\",\n      memail: \"\",\n      mtel: \"\",\n      error: \"\",\n      isTelChanged: false,\n    };\n  },\n  async mounted() {\n    await this.fetchUserInfo();\n  },\n  methods: {\n    async fetchUserInfo() {\n      try {\n        // store에서 userMnum 가져오기\n        const mnum = this.$store.getters.getUserMnum;\n        console.log(\"mnum : \" + mnum);\n\n        // 백엔드에서 사용자 정보 조회\n        const response = await axios.get(`/updateInfo/${mnum}`);\n        console.log(\"response : \" + response);\n\n        // 응답 데이터로부터 사용자 정보 추출\n        const { mname, mnic, memail, mtel } = response.data;\n        console.log(\"response.data : \" + response.data);\n\n        // 가져온 데이터로 입력 폼 채우기\n        this.mnum = mnum;\n        this.mname = mname;\n        this.mnic = mnic;\n        this.memail = memail;\n        this.mtel = mtel;\n      } catch (error) {\n        console.error(\"사용자 정보를 불러오는데 실패했습니다.\", error);\n        this.error = \"사용자 정보를 불러오는 중 오류가 발생했습니다.\";\n      }\n    },\n    async updateUserInfo() {\n      if (!this.mtel.trim()) {\n        alert(\"연락처를 입력하세요.\");\n        return;\n      }\n\n      try {\n        // 백엔드로 전송할 객체\n        const userInfo = {\n          mname: this.mname,\n          mnic: this.mnic,\n          memail: this.memail,\n          mtel: this.mtel,\n        };\n\n        await axios.put(`/updateInfo/${this.mnum}`, userInfo);\n\n        // 추후 주문내역 페이지로 수정하기\n        this.$router.push(\"/client/home\");\n\n        alert(\"정보가 성공적으로 업데이트 되었습니다.\");\n      } catch (error) {\n        console.log(\"정보 업데이트 중 오류 발생\", error);\n        this.error = \" 정보 업데이트 중 오류가 발생했습니다.\";\n      }\n    },\n    async updateAccountStatus() {\n      if (\n        !confirm(\"정말로 탈퇴하시겠습니까? 탈퇴한 계정은 복구할 수 없습니다.\")\n      ) {\n        return;\n      }\n      try {\n        await axios.put(`/updateAccountStatus/${this.mnum}`);\n\n        this.$store.commit(\"setLoginStatus\", false);\n        this.$store.commit(\"setUserLevel\", null);\n        this.$store.commit(\"setUserMnum\", null);\n        sessionStorage.removeItem(\"setLoginStatus\");\n        sessionStorage.removeItem(\"userLevel\");\n        sessionStorage.removeItem(\"userMnum\");\n\n        this.$router.push(\"/selectMemberType\");\n        alert(\"탈퇴되었습니다. 안녕히 가세요.\");\n      } catch (error) {\n        console.log(\"계정 삭제 중 오류 발생\", error);\n        alert(\"탈퇴하는 중 오류가 발생했습니다.\");\n      }\n    },\n    enableTelChange() {\n      this.isTelChanged = true;\n    },\n  },\n};\n</script>\n\n<style scoped>\n.container {\n  display: flex;\n  flex-direction: column;\n  min-height: 100vh; /* 최소 높이 설정 */\n}\n\n.mb-4 {\n  text-align: center;\n}\n.form-buttons {\n  display: flex;\n  justify-content: space-between;\n  margin-top: 50px;\n} \n\n.btn {\n  margin-top: 10px;\n  margin-bottom: 5px;\n  margin-right: 10px;\n  color: black;\n  background-color: #f5beae;\n  border-color: #f5beae;\n}\n\n.btn:hover {\n  background-color: #f5835d;\n}\n</style>\n","import { render } from \"./JH_B_UpdateInfo.vue?vue&type=template&id=3f87c992&scoped=true\"\nimport script from \"./JH_B_UpdateInfo.vue?vue&type=script&lang=js\"\nexport * from \"./JH_B_UpdateInfo.vue?vue&type=script&lang=js\"\n\nimport \"./JH_B_UpdateInfo.vue?vue&type=style&index=0&id=3f87c992&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-3f87c992\"]])\n\nexport default __exports__"],"names":["class","_createElementVNode","for","_createElementBlock","_hoisted_1","_hoisted_2","onSubmit","_cache","_withModifiers","args","_ctx","submitForm","_hoisted_3","_hoisted_4","type","$event","$data","mname","id","required","disabled","_hoisted_5","_hoisted_6","memail","_hoisted_7","_hoisted_8","mtel","pattern","onInput","$options","enableTelChange","_hoisted_9","_hoisted_10","onClick","updateAccountStatus","updateUserInfo","isTelChanged","_hoisted_11","data","mnum","mnic","error","mounted","this","fetchUserInfo","methods","$store","getters","getUserMnum","console","log","response","axios","get","trim","userInfo","put","$router","push","alert","confirm","commit","sessionStorage","removeItem","__exports__","render"],"sourceRoot":""}