"use strict";(self["webpackChunkv2_client"]=self["webpackChunkv2_client"]||[]).push([[356],{8356:function(t,e,i){i.r(e),i.d(e,{default:function(){return I}});var n=i(6768),a=i(4232),o=i(5130);const l=(0,n.Lk)("div",{id:"pageName"},[(0,n.Lk)("h2",null,"리뷰작성 -개인-")],-1),r=(0,n.Lk)("hr",{class:"my-4"},null,-1),s={id:"starRating",class:"btn-group",role:"group","aria-label":"Basic radio toggle button group"},c=(0,n.Lk)("label",{class:"btn btn-outline-primary",for:"btnradio1"},"1",-1),m=(0,n.Lk)("label",{class:"btn btn-outline-primary",for:"btnradio2"},"2",-1),u=(0,n.Lk)("label",{class:"btn btn-outline-primary",for:"btnradio3"},"3",-1),d=(0,n.Lk)("label",{class:"btn btn-outline-primary",for:"btnradio4"},"4",-1),h=(0,n.Lk)("label",{class:"btn btn-outline-primary",for:"btnradio5"},"5",-1),b=(0,n.Lk)("hr",{class:"my-4"},null,-1),g={id:"reviewImg",class:"custom-file"},f=(0,n.Lk)("label",{class:"custom-file-label",for:"customFile"},"사진추가",-1),k=(0,n.Lk)("br",null,null,-1),p={id:"imagePreview"},v=["src"],y={id:"reviewWrite",class:"form-floating"},L=["placeholder"],w=(0,n.Lk)("label",{for:"floatingTextarea2"},"리뷰 입력",-1),R={class:"reviewButton"},C={id:"liveAlertPlaceholder"};function _(t,e,i,_,U,W){return(0,n.uX)(),(0,n.CE)(n.FK,null,[l,r,(0,n.Lk)("div",s,[(0,n.Lk)("input",{type:"radio",class:"btn-check",name:"btnradio",id:"btnradio1",autocomplete:"off",onClick:e[0]||(e[0]=t=>W.selectRating(1))}),c,(0,n.Lk)("input",{type:"radio",class:"btn-check",name:"btnradio",id:"btnradio2",autocomplete:"off",onClick:e[1]||(e[1]=t=>W.selectRating(2))}),m,(0,n.Lk)("input",{type:"radio",class:"btn-check",name:"btnradio",id:"btnradio3",autocomplete:"off",onClick:e[2]||(e[2]=t=>W.selectRating(3))}),u,(0,n.Lk)("input",{type:"radio",class:"btn-check",name:"btnradio",id:"btnradio4",autocomplete:"off",onClick:e[3]||(e[3]=t=>W.selectRating(4))}),d,(0,n.Lk)("input",{type:"radio",class:"btn-check",name:"btnradio",id:"btnradio5",autocomplete:"off",onClick:e[4]||(e[4]=t=>W.selectRating(5))}),h]),(0,n.Lk)("h2",null,"내 점수: "+(0,a.v_)(U.myRating),1),b,(0,n.Lk)("div",g,[(0,n.Lk)("input",{id:"customFile",type:"file",ref:"image",onChange:e[5]||(e[5]=(...t)=>W.upload&&W.upload(...t))},null,544),f]),k,(0,n.Lk)("div",p,[U.imageUrl?((0,n.uX)(),(0,n.CE)("img",{key:0,src:U.imageUrl,class:"rounded mx-auto d-block",style:{"max-width":"100%","max-height":"300px"}},null,8,v)):(0,n.Q3)("",!0)]),(0,n.Lk)("div",y,[(0,n.bo)((0,n.Lk)("textarea",{"onUpdate:modelValue":e[6]||(e[6]=t=>U.reviewContent=t),class:"form-control",placeholder:U.contentPh,id:"floatingTextarea2",style:{height:"300px"}},null,8,L),[[o.Jo,U.reviewContent]]),w]),(0,n.Lk)("div",R,[(0,n.Lk)("div",C,(0,a.v_)(U.message),1),(0,n.Lk)("button",{id:"liveAlertBtn",class:"btn btn-primary",onClick:e[7]||(e[7]=(...t)=>W.submitReviewWrite&&W.submitReviewWrite(...t))},"리뷰작성완료")])],64)}i(4114),i(4603),i(7566),i(8721);var U=i(8355),W={data(){return{info:{},reviewContent:"",myRating:"",image:null,imageUrl:null,message:"",ratingPh:"별점을 주세요",contentPh:"내용을 입력하세요"}},mounted(){this.fetchWrtieInfo()},methods:{async fetchWrtieInfo(){try{const t=await U.A.post("/JY_C_WriteInfo",{onum:this.$route.query.onum});this.info=t.data,this.mnum=this.info.mnum,this.bnum=this.info.bnum,this.onum=this.info.onum,console.log("kkk Response:",t.data)}catch(t){console.error("Error fetching writeInfo:",t)}},async upload(){this.image=this.$refs.image.files[0],console.log(this.image),this.image&&(this.imageUrl=URL.createObjectURL(this.image))},async submitReviewWrite(){if(this.myRating)if(""!==this.reviewContent.trim())try{await this.upload();const t=new Date,e={onum:this.onum,mnum:this.mnum,bnum:this.bnum,rcontent:this.reviewContent,rstar:this.myRating,rdate:t.toISOString(),rstatus_makey:1e3,rstatus_mikey:1001,rcomment:null};this.imageUrl&&(e.rimg=this.imageUrl),console.log("reviewData->"+e);const i=await U.A.post("/JY_C_ReviewWrite",e);console.log(i.data),alert("리뷰가 성공적으로 작성되었습니다."),this.$router.push("/JY_C_ReviewList")}catch(t){console.error("Error fetching reviewWrite",t),alert("리뷰 작성에 실패했습니다.")}else this.message=this.contentPh;else this.message=this.ratingPh},selectRating(t){this.myRating=t}}},x=i(1241);const P=(0,x.A)(W,[["render",_]]);var I=P}}]);
//# sourceMappingURL=356.b3b528ae.js.map