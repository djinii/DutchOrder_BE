{"version":3,"file":"js/828.8e319ec4.js","mappings":"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","sources":["webpack://v2_client/./src/views/client/JH_C_UpdateInfo.vue","webpack://v2_client/./src/views/client/JH_C_UpdateInfo.vue?4f89"],"sourcesContent":["<template>\n  <div class=\"container mt-5\">\n    <!-- 개인 -->\n    <h2 class=\"mb-4\">개인정보수정</h2>\n    <form @submit.prevent=\"submitForm\">\n      <div class=\"mb-3\">\n        <label for=\"mname\" class=\"form-label\">이름</label>\n        <input\n          type=\"text\"\n          v-model=\"mname\"\n          class=\"form-control\"\n          id=\"mname\"\n          required\n          disabled\n        />\n      </div>\n    </form>\n    <div class=\"mb-3\">\n      <label for=\"mnic\" class=\"form-label\">닉네임</label>\n      <div class=\"input-group\">\n        <input\n          type=\"text\"\n          v-model=\"mnic\"\n          class=\"form-control\"\n          id=\"mnic\"\n          required\n          placeholder=\"친구 추가시 사용됩니다\"\n          @input=\"enableNickNameChange\"\n        />\n        <button\n          type=\"button\"\n          class=\"btn btn-primary\"\n          @click=\"checkDuplicates('mnic')\"\n          :disabled=\"!isNickNameChanged\"\n        >\n          중복확인\n        </button>\n      </div>\n    </div>\n    <div class=\"mb-3\">\n      <label for=\"memail\" class=\"form-label\">이메일</label>\n      <input\n        type=\"memail\"\n        v-model=\"memail\"\n        class=\"form-control\"\n        id=\"memail\"\n        required\n        disabled\n      />\n    </div>\n    <div class=\"mb-3\">\n      <label for=\"mtel\" class=\"form-label\">연락처</label>\n      <div class=\"input-group\">\n        <input\n          type=\"tel\"\n          v-model=\"mtel\"\n          class=\"form-control\"\n          id=\"mtel\"\n          pattern=\"[0-9]{3}-[0-9]{4}-[0-9]{4}\"\n          required\n          @input=\"enableTelChange\"\n        />\n      </div>\n      <small class=\"text-muted\">예시: 010-1234-5678</small>\n    </div>\n    <div class=\"form-buttons\">\n      <button\n        type=\"submit\"\n        class=\"btn btn-primary withdraw\"\n        @click=\"updateAccountStatus\"\n      >\n        탈퇴하기\n      </button>\n      <button\n        type=\"submit\"\n        class=\"btn btn-primary\"\n        @click=\"updateUserInfo\"\n        :disabled=\"!isTelChanged && !isNickNameChanged\"\n      >\n        수정하기\n      </button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\n\nexport default {\n  data() {\n    return {\n      mnum: \"\",\n      mname: \"\",\n      mnic: \"\",\n      memail: \"\",\n      mtel: \"\",\n      originalMnic: \"\",\n      originalMtel: \"\",\n      isNickNameChanged: false,\n      isTelChanged: false,\n      error: \"\",\n    };\n  },\n  async mounted() {\n    await this.fetchUserInfo();\n  },\n  methods: {\n    async fetchUserInfo() {\n      try {\n        // store에서 userMnum 가져오기\n        const mnum = this.$store.getters.getUserMnum;\n        console.log(\"mnum : \" + mnum);\n\n        // 백엔드에서 사용자 정보 조회\n        const response = await axios.get(`/updateInfo/${mnum}`);\n        console.log(\"response : \" + response);\n\n        // 응답 데이터로부터 사용자 정보 추출\n        const { mname, mnic, memail, mtel } = response.data;\n        console.log(\"response.data : \" + response.data);\n\n        // 가져온 데이터로 입력 폼 채우기\n        this.mnum = mnum;\n        this.mname = mname;\n        this.mnic = mnic;\n        this.originalMnic = mnic;\n        this.memail = memail;\n        this.mtel = mtel;\n        this.originalMtel = mtel;\n      } catch (error) {\n        console.error(\"사용자 정보를 불러오는데 실패했습니다.\", error);\n        this.error = \"사용자 정보를 불러오는 중 오류가 발생했습니다.\";\n      }\n    },\n\n    async checkDuplicates(field) {\n      if (field === \"mnic\") {\n        // 닉네임 중복 확인\n        if (!this.mnic.trim()) {\n          alert(\"닉네임을 입력해주세요.\");\n          return;\n        }\n        try {\n          const response = await axios.get(\n            `/check-duplicate/mnic?mnic=${this.mnic}`\n          );\n          if (response.data.isDuplicate) {\n            alert(\"이미 사용 중인 닉네임입니다.\");\n          } else {\n            alert(\"사용 가능한 닉네임입니다.\");\n          }\n        } catch (error) {\n          console.error(\"닉네임 중복 확인 오류:\", error);\n          alert(\"닉네임 중복 확인 중 문제가 발생했습니다.\");\n        }\n      }\n    },\n\n    async updateUserInfo() {\n      console.log(\"updateUserInfo Start!\");\n      if (!this.isNickNameChanged && !this.isTelChanged) {\n        alert(\"수정할 내용이 없습니다.\");\n        return;\n      }\n\n      if (this.isNickNameChanged) {\n        // 닉네임이 변경되었는지 확인 후 중복 확인\n        try {\n          const response = await axios.get(\n            `/check-duplicate/mnic?mnic=${this.mnic}`\n          );\n          if (response.data.isDuplicate) {\n            alert(\"이미 사용 중인 닉네임입니다.\");\n            return;\n          }\n        } catch (error) {\n          console.error(\"닉네임 중복 확인 오류:\", error);\n          alert(\"닉네임 중복 확인 중 문제가 발생했습니다.\");\n          return;\n        }\n      }\n\n      try {\n        // 백엔드로 전송할 객체\n        const userInfo = {\n          mname: this.mname,\n          mnic: this.mnic,\n          memail: this.memail,\n          mpw: this.newMpw,\n          mtel: this.mtel,\n        };\n        await axios.put(`/updateInfo/${this.mnum}`, userInfo);\n        // 추후 주문내역 페이지로 수정하기\n        this.$router.push(\"/client/home\");\n\n        alert(\"정보가 성공적으로 업데이트 되었습니다.\");\n      } catch (error) {\n        console.log(\"정보 업데이트 중 오류 발생\", error);\n        this.error = \"닉네임 중복을 확인해주세요\";\n        alert(\"닉네임 중복을 확인해주세요\");\n      }\n    },\n    async updateAccountStatus() {\n      if (\n        !confirm(\"정말로 탈퇴하시겠습니까? 탈퇴한 계정은 복구할 수 없습니다.\")\n      ) {\n        return;\n      }\n      try {\n        await axios.put(`/updateAccountStatus/${this.mnum}`);\n\n        this.$store.commit(\"setLoginStatus\", false);\n        this.$store.commit(\"setUserLevel\", null);\n        this.$store.commit(\"setUserMnum\", null);\n        sessionStorage.removeItem(\"setLoginStatus\");\n        sessionStorage.removeItem(\"userLevel\");\n        sessionStorage.removeItem(\"userMnum\");\n\n        this.$router.push(\"/selectMemberType\");\n        alert(\"탈퇴되었습니다. 안녕히 가세요.\");\n      } catch (error) {\n        console.log(\"계정 삭제 중 오류 발생\", error);\n        alert(\"탈퇴하는 중 오류가 발생했습니다.\");\n      }\n    },\n    enableTelChange() {\n      this.isTelChanged = true;\n    },\n    enableNickNameChange() {\n      this.isNickNameChanged = true;\n    },\n  },\n};\n</script>\n\n<style scoped>\n.container {\n  display: flex;\n  flex-direction: column;\n  min-height: 100vh; /* 최소 높이 설정 */\n}\n\n.mb-4 {\n  text-align: center;\n}\n.form-buttons {\n  display: flex;\n  justify-content: space-between;\n  margin-top: 50px;\n}\n\n.btn {\n  margin-top: 10px;\n  margin-bottom: 5px;\n  margin-right: 10px;\n  color: black;\n  background-color: #f5beae;\n  border-color: #f5beae;\n}\n\n.btn:hover {\n  background-color: #f5835d;\n}\n</style>\n","import { render } from \"./JH_C_UpdateInfo.vue?vue&type=template&id=01ea4b5c&scoped=true\"\nimport script from \"./JH_C_UpdateInfo.vue?vue&type=script&lang=js\"\nexport * from \"./JH_C_UpdateInfo.vue?vue&type=script&lang=js\"\n\nimport \"./JH_C_UpdateInfo.vue?vue&type=style&index=0&id=01ea4b5c&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-01ea4b5c\"]])\n\nexport default __exports__"],"names":["class","_createElementVNode","for","_createElementBlock","_hoisted_1","_hoisted_2","onSubmit","_cache","_withModifiers","args","_ctx","submitForm","_hoisted_3","_hoisted_4","type","$event","$data","mname","id","required","disabled","_hoisted_5","_hoisted_6","_hoisted_7","mnic","placeholder","onInput","$options","enableNickNameChange","onClick","checkDuplicates","isNickNameChanged","_hoisted_8","_hoisted_9","_hoisted_10","memail","_hoisted_11","_hoisted_12","_hoisted_13","mtel","pattern","enableTelChange","_hoisted_14","_hoisted_15","updateAccountStatus","updateUserInfo","isTelChanged","_hoisted_16","data","mnum","originalMnic","originalMtel","error","mounted","this","fetchUserInfo","methods","$store","getters","getUserMnum","console","log","response","axios","get","field","trim","alert","isDuplicate","userInfo","mpw","newMpw","put","$router","push","confirm","commit","sessionStorage","removeItem","__exports__","render"],"sourceRoot":""}