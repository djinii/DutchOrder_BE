"use strict";(self["webpackChunkv2_client"]=self["webpackChunkv2_client"]||[]).push([[727],{727:function(t,s,e){e.r(s),e.d(s,{default:function(){return M}});var o=e(6768),r=e(4232);const i=(0,o.Lk)("div",{id:"pageName"},[(0,o.Lk)("h2",{class:"text-center"},"리뷰목록")],-1),n=(0,o.Lk)("hr",{class:"my-4"},null,-1),l={id:"answerSort",class:"dropdown dropend"},a={class:"btn btn-primary dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},d={class:"dropdown-menu"},c=(0,o.Lk)("li",null,[(0,o.Lk)("hr",{class:"dropdown-divider"})],-1),u={id:"timeSort",class:"dropdown dropend"},h={class:"btn btn-primary dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},p={class:"dropdown-menu"},m=(0,o.Lk)("li",null,[(0,o.Lk)("hr",{class:"dropdown-divider"})],-1),k=(0,o.Lk)("hr",{class:"my-4"},null,-1),L={key:0},w={class:"card mb-3",style:{"max-width":"540px"}},y={class:"row g-0"},v={class:"col-md-4"},g=["src"],f={class:"col-md-8"},b={class:"card-body"},x={class:"card-text"},C={class:"text-body-secondary"},S={class:"card-title"},T=["onClick"],_=["onClick"];function E(t,s,e,E,D,N){return(0,o.uX)(),(0,o.CE)(o.FK,null,[i,n,(0,o.Lk)("div",l,[(0,o.Lk)("button",a,(0,r.v_)(D.sortStatusText),1),(0,o.Lk)("ul",d,[(0,o.Lk)("li",null,[(0,o.Lk)("a",{id:"writeComplete",class:"dropdown-item",onClick:s[0]||(s[0]=t=>N.filterByStatus(0))},"작성 미완료")]),c,(0,o.Lk)("li",null,[(0,o.Lk)("a",{id:"writeIncomplete",class:"dropdown-item",onClick:s[1]||(s[1]=t=>N.filterByStatus(1))},"작성 완료")])])]),(0,o.Lk)("div",u,[(0,o.Lk)("button",h,(0,r.v_)(D.sortTimeText),1),(0,o.Lk)("ul",p,[(0,o.Lk)("li",null,[(0,o.Lk)("a",{id:"newest",class:"dropdown-item",onClick:s[2]||(s[2]=(...t)=>N.sortNewest&&N.sortNewest(...t))},"최신순")]),m,(0,o.Lk)("li",null,[(0,o.Lk)("a",{id:"oldest",class:"dropdown-item",onClick:s[3]||(s[3]=(...t)=>N.sortOldest&&N.sortOldest(...t))},"오래된순")])])]),k,((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(N.filteredShopList,(t=>((0,o.uX)(),(0,o.CE)("div",{class:"shopInfo",key:t},[805===t.ostatus_mikey?((0,o.uX)(),(0,o.CE)("div",L,[(0,o.Lk)("div",w,[(0,o.Lk)("div",y,[(0,o.Lk)("div",v,[(0,o.Lk)("img",{src:t.simg1,class:"rounded mx-auto d-block",style:{"max-width":"100%","max-height":"300px"}},null,8,g)]),(0,o.Lk)("div",f,[(0,o.Lk)("div",b,[(0,o.Lk)("p",x,[(0,o.Lk)("small",C,(0,r.v_)(t.strOdate),1)]),(0,o.Lk)("h5",S,[(0,o.Lk)("strong",null,(0,r.v_)(t.sname),1)]),t.rnum>0?((0,o.uX)(),(0,o.CE)("button",{key:0,class:"btn btn-secondary",type:"button",onClick:s=>N.moveMyReview(t.rnum)},"작성한 리뷰 보기",8,T)):((0,o.uX)(),(0,o.CE)("button",{key:1,class:"btn btn-primary",type:"button",onClick:s=>N.moveWrite(t.onum)},"리뷰 작성하기",8,_))])])])])])):(0,o.Q3)("",!0)])))),128))],64)}e(4114);var D=e(8355),N={data(){return{shopList:[],sortTimeText:"시간별 정렬",sortStatusText:"작성별 정렬"}},mounted(){this.fetchShopList()},computed:{filteredShopList(){return"작성 완료"===this.sortStatusText?(console.log(this.shopList),this.shopList.filter((t=>t.rnum>0))):"작성 미완료"===this.sortStatusText?(console.log(this.shopList),this.shopList.filter((t=>0===t.rnum))):(console.log(this.shopList),this.shopList)}},methods:{async fetchShopList(){try{const t=await D.A.post("/JY_C_ReviewList",{mnum:this.$store.state.userMnum});this.shopList=t.data.filter((t=>t.mnum===this.$store.state.userMnum)).map((t=>(t.odate=this.formatDate(t.odate),t.simg1=t.simg1?t.simg1:"",t))),console.log("Response:",t.data)}catch(t){console.error("Error fetching shopList:",t)}},async moveWrite(t){try{this.$router.push({path:"/JY_C_ReviewWrite",query:{onum:t}})}catch(s){console.error("Error fetching reviewWrite:",s)}},async moveMyReview(t){try{this.$router.push({path:"/JY_C_MyReview",query:{rnum:t}})}catch(s){console.error("Error fetching reviewWrite:",s)}},formatDate(t){if(!t)return"";const s=new Date(t);return isNaN(s.getTime())?"":`${s.toISOString().slice(0,16).replace("T"," ")}`},filterByStatus(t){1===t?this.sortStatusText="작성 완료":0===t&&(this.sortStatusText="작성 미완료")},sortNewest(){this.shopList.sort(((t,s)=>new Date(s.odate)-new Date(t.odate))),this.sortTimeText="최신순",console.log(this.shopList)},sortOldest(){this.shopList.sort(((t,s)=>new Date(t.odate)-new Date(s.odate))),this.sortTimeText="오래된순",console.log(this.shopList)}}},R=e(1241);const X=(0,R.A)(N,[["render",E]]);var M=X}}]);
//# sourceMappingURL=727.16d3dda1.js.map