"use strict";(self["webpackChunkv2_client"]=self["webpackChunkv2_client"]||[]).push([[975],{8975:function(e,t,s){s.r(t),s.d(t,{default:function(){return H}});var a=s(6768);const l={class:"container mt-5"},i=(0,a.Lk)("h2",{class:"mb-4"},"가게 등록",-1),o={key:0,class:"alert alert-info"},m={key:1,class:"alert alert-info"},n={key:2,class:"alert alert-success"};function r(e,t,s,r,u,c){const d=(0,a.g2)("B_ShopReg"),h=(0,a.g2)("B_FileInsert");return(0,a.uX)(),(0,a.CE)("div",l,[i,c.shouldShowFileRegistrationSection?((0,a.uX)(),(0,a.CE)("div",o,[(0,a.bF)(d,{mnum:u.mnum},null,8,["mnum"])])):601===u.bFiles.bfstatus_mikey?((0,a.uX)(),(0,a.CE)("div",m," 가게 등록 승인 중입니다. ")):u.shopStatus&&502===u.shopStatus.bstaus_mikey?((0,a.uX)(),(0,a.CE)("div",n," 가게 등록이 승인 되었습니다. ")):(0,a.Q3)("",!0),c.shouldShowFileInsertSection?((0,a.uX)(),(0,a.Wv)(h,{key:3,mnum:u.mnum},null,8,["mnum"])):(0,a.Q3)("",!0)])}var u=s(8355),c=s(5130);const d={class:"mb-3"},h=(0,a.Lk)("label",{for:"sname",class:"form-label"},"식당명",-1),g={class:"mb-3"},b=(0,a.Lk)("label",{for:"fcategory_mikey",class:"form-label"},"가게 분류",-1),k=(0,a.Lk)("option",{value:"301"},"한식",-1),p=(0,a.Lk)("option",{value:"302"},"중식",-1),f=(0,a.Lk)("option",{value:"303"},"일식",-1),y=(0,a.Lk)("option",{value:"304"},"분식",-1),v=[k,p,f,y],L={class:"mb-3"},_=(0,a.Lk)("label",{for:"saddr",class:"form-label"},"주소",-1),F={class:"mb-3"},w=(0,a.Lk)("label",{for:"stel",class:"form-label"},"전화번호",-1),R={class:"mb-3"},S=(0,a.Lk)("label",{for:"start_time",class:"form-label"},"운영시간 시작",-1),U={class:"mb-3"},x=(0,a.Lk)("label",{for:"end_time",class:"form-label"},"운영시간 종료",-1),A={id:"reviewImg",class:"custom-file"},C=(0,a.Lk)("label",{class:"custom-file-label",for:"customFile"},[(0,a.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"50",height:"50",fill:"currentColor",class:"bi bi-card-image",viewBox:"0 0 16 16"},[(0,a.Lk)("path",{d:"M6.002 5.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0"}),(0,a.Lk)("path",{d:"M1.5 2A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h13a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2zm13 1a.5.5 0 0 1 .5.5v6l-3.775-1.947a.5.5 0 0 0-.577.093l-3.71 3.71-2.66-1.772a.5.5 0 0 0-.63.062L1.002 12v.54L1 12.5v-9a.5.5 0 0 1 .5-.5z"})])],-1),I={id:"imagePreview"},z=["src"];function B(e,t,s,l,i,o){return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.Lk)("div",d,[h,(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>i.sname=e),class:"form-control",id:"sname"},null,512),[[c.Jo,i.sname]])]),(0,a.Lk)("div",g,[b,(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>i.fcategory_mikey=e),class:"form-select",id:"fcategory_mikey"},v,512),[[c.u1,i.fcategory_mikey]])]),(0,a.Lk)("div",L,[_,(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=e=>i.saddr=e),class:"form-control",id:"saddr"},null,512),[[c.Jo,i.saddr]])]),(0,a.Lk)("div",F,[w,(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=e=>i.stel=e),class:"form-control",id:"stel"},null,512),[[c.Jo,i.stel]])]),(0,a.Lk)("div",R,[S,(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=e=>i.start_time=e),class:"form-control",id:"start_time"},null,512),[[c.Jo,i.start_time]])]),(0,a.Lk)("div",U,[x,(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=e=>i.end_time=e),class:"form-control",id:"end_time"},null,512),[[c.Jo,i.end_time]])]),(0,a.Lk)("div",A,[(0,a.Lk)("input",{id:"customFile",type:"file",ref:"image",onChange:t[6]||(t[6]=(...e)=>o.upload&&o.upload(...e))},null,544),C]),(0,a.Lk)("div",I,[i.imageUrl?((0,a.uX)(),(0,a.CE)("img",{key:0,src:i.imageUrl,class:"rounded mx-auto d-block",style:{"max-width":"100%","max-height":"300px"}},null,8,z)):(0,a.Q3)("",!0)]),(0,a.Lk)("button",{onClick:t[7]||(t[7]=(...e)=>o.submitRegistrationForm&&o.submitRegistrationForm(...e)),class:"btn btn-primary"}," 가게 등록 ")])}var X={name:"B_ShopReg",props:{mnum:Number},data(){return{sname:"",fcategory_mikey:"301",saddr:"",stel:"",start_time:"",end_time:"",imageUrl:null,simg1:null}},mounted(){console.log("Received mnum:",this.mnum)},methods:{async upload(){if(this.image=this.$refs.image.files[0],console.log(this.image),!this.image)return;const e=new FileReader;e.onload=e=>{this.imageUrl=e.target.result},e.readAsDataURL(this.image)},async submitRegistrationForm(){try{const e={bnum:this.mnum,sname:this.sname,fcategory_mikey:this.fcategory_mikey,saddr:this.saddr,stel:this.stel,start_time:this.start_time,end_time:this.end_time,simg1:this.imageUrl,simg2:null,simg3:null,sconfirm:null,mnum:this.mnum,fcategory_makey:300,sstatus_makey:400,sstatus_mikey:400,bstaus_makey:500,bstaus_mikey:500,bid:"1"};this.imageUrl&&(e.simg1=this.imageUrl),console.log("formData->"+e);const t=await u.A.post("/ShopReg",e);console.log("가게 등록 완료:",t.data),alert("가게가 성공적으로 등록되었습니다.")}catch(e){console.error("가게 등록 오류:",e),alert("리뷰 작성에 실패했습니다.")}}}},E=s(1241);const D=(0,E.A)(X,[["render",B]]);var V=D;const J={id:"bizRegFileImg",class:"custom-file"},M=(0,a.Lk)("label",{for:"bizRegFileImg"},"사업자등록증",-1),Q=(0,a.Lk)("label",{class:"custom-file-label",for:"customFile"},[(0,a.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"50",height:"50",fill:"currentColor",class:"bi bi-card-image",viewBox:"0 0 16 16"},[(0,a.Lk)("path",{d:"M6.002 5.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0"}),(0,a.Lk)("path",{d:"M1.5 2A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h13a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2zm13 1a.5.5 0 0 1 .5.5v6l-3.775-1.947a.5.5 0 0 0-.577.093l-3.71 3.71-2.66-1.772a.5.5 0 0 0-.63.062L1.002 12v.54L1 12.5v-9a.5.5 0 0 1 .5-.5z"})])],-1),P={id:"bizRegImagePreview"},$=["src"];function N(e,t,s,l,i,o){return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.Lk)("div",J,[M,(0,a.Lk)("input",{id:"customFile",type:"file",ref:"image",onChange:t[0]||(t[0]=(...e)=>o.upload&&o.upload(...e))},null,544),Q]),(0,a.Lk)("div",P,[i.bizRegImageUrl?((0,a.uX)(),(0,a.CE)("img",{key:0,src:i.bizRegImageUrl,class:"rounded mx-auto d-block",style:{"max-width":"100%","max-height":"300px"}},null,8,$)):(0,a.Q3)("",!0)]),(0,a.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>o.submitForm&&o.submitForm(...e)),class:"btn btn-primary"},"업로드")])}s(4114);var O={name:"B_FileInsert",props:["mnum"],data(){return{bizRegImage:null,bizRegImageUrl:null}},methods:{async upload(){if(this.image=this.$refs.image.files[0],console.log(this.image),!this.image)return;const e=new FileReader;e.onload=e=>{this.bizRegImageUrl=e.target.result},e.readAsDataURL(this.image)},async submitForm(){try{const e={mnum:this.mnum,bfnum:this.mnum,bftype_makey:600,bftype_mikey:601,bfimg1:this.bizRegImageUrl};console.log("formData->"+e);const t=await u.A.post("/BFileInsert",e);console.log("파일 등록 완료:",t.data),alert("파일 등록 완료 되었습니다. 2~3일 정도 확인할 시간이 소요됩니다."),this.$router.push("/business/B_Ordering")}catch(e){console.error("파일 등록 오류:",e),alert("파일 등록에 실패했습니다.")}}}};const W=(0,E.A)(O,[["render",N]]);var j=W,q={name:"B_Files",components:{B_ShopReg:V,B_FileInsert:j},data(){return{shopStatus:{},bFiles:{},mnum:1011}},mounted(){this.fetchData()},computed:{shouldShowFileRegistrationSection(){return!this.shopStatus||!this.shopStatus.bstaus_mikey||!this.mnum},shouldShowFileInsertSection(){return!this.bFiles||!this.bFiles.bfnum}},methods:{async fetchData(){try{const[e,t]=await Promise.all([u.A.post("/ShopAcceptStatus",{mnum:this.mnum}),u.A.post("/BFileDetail",{mnum:this.mnum})]);this.shopStatus=e.data,this.bFiles=t.data,console.log("상태:",this.shopStatus),console.log("파일 상태:",this.bFiles.bfnum)}catch(e){console.error("데이터를 불러오는 중 오류 발생:",e)}}}};const G=(0,E.A)(q,[["render",r]]);var H=G}}]);
//# sourceMappingURL=975.00f0b713.js.map