"use strict";(self["webpackChunkv2_client"]=self["webpackChunkv2_client"]||[]).push([[707],{4707:function(t,e,s){s.r(e),s.d(e,{default:function(){return kt}});var a=s(6768),r=s(4232);const o={class:"nav nav-tabs",id:"nav-tab",role:"tablist"},n=["id","data-bs-target","aria-controls","aria-selected","onClick"],i={class:"tab-content",id:"nav-tabContent"},u=["id","aria-labelledby"],d={class:"container"},l={class:"row"};function c(t,e,s,c,m,b){const k=(0,a.g2)("router-link"),h=(0,a.g2)("B_Ordcard"),p=(0,a.g2)("B_OrdSpecCard"),v=(0,a.g2)("B_ShopStatus");return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.Lk)("div",o,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(m.tabs,((t,e)=>((0,a.uX)(),(0,a.CE)("button",{key:e,class:(0,r.C4)({"nav-link":!0,active:e===m.activeTabIndex}),id:"nav-"+t.id+"-tab","data-bs-toggle":"tab","data-bs-target":"#nav-"+t.id,type:"button",role:"tab","aria-controls":"nav-"+t.id,"aria-selected":e===m.activeTabIndex,onClick:t=>b.changeTab(e)},[(0,a.bF)(k,{to:{path:"/B_Ordering",query:{status:t.status}}},{default:(0,a.k6)((()=>[(0,a.eW)((0,r.v_)(t.name),1)])),_:2},1032,["to"])],10,n)))),128))]),(0,a.Lk)("div",i,[((0,a.uX)(),(0,a.Wv)(a.PR,null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(m.tabs,((t,e)=>((0,a.uX)(),(0,a.CE)("div",{key:e,id:"nav-"+t.id,class:(0,r.C4)(["tab-pane fade",{"show active":e===m.activeTabIndex}]),role:"tabpanel","aria-labelledby":"nav-"+t.id+"-tab"},[(0,a.Lk)("div",d,[(0,a.Lk)("div",l,["home"===t.id?((0,a.uX)(),(0,a.Wv)(h,{key:0,bnum:m.bnum},null,8,["bnum"])):((0,a.uX)(),(0,a.Wv)(p,{key:1,bnum:m.bnum,orderStatus:t.orderStatus},null,8,["bnum","orderStatus"]))])])],10,u)))),128))],1024)),(0,a.bF)(v,{bnum:m.bnum},null,8,["bnum"])])])}const m={class:"container",style:{"max-height":"500px","overflow-y":"auto"}},b={class:"row"},k={class:"card mt-3",style:{width:"18rem"}},h=(0,a.Lk)("h5",{class:"card-title"},"이미지",-1),p={class:"card-body"},v={class:"card",style:{width:"16rem"}},y={class:"list-group list-group-flush"},L={class:"list-group-item"},_={class:"list-group-item"},C={class:"list-group-item"},g=(0,a.Lk)("p",null,null,-1),f={class:"button-group"},S=["onClick"],O=["onClick"],w=["onClick"],X=["onClick"];function E(t,e,s,o,n,i){const u=(0,a.g2)("MS_B_OrderDetailModal");return(0,a.uX)(),(0,a.CE)("div",m,[(0,a.Lk)("div",b,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.uniqueOrders,((t,s)=>((0,a.uX)(),(0,a.CE)("div",{key:s,class:"col-3 mb-3"},[(0,a.Lk)("div",k,[h,(0,a.Lk)("div",p,[(0,a.Lk)("div",v,[(0,a.Lk)("ul",y,[(0,a.Lk)("li",L," 주문일시: "+(0,r.v_)(i.formatDate(t.odate)),1),(0,a.Lk)("li",_,"주문번호: "+(0,r.v_)(t.osnum),1),(0,a.Lk)("li",C,"사업자번호: "+(0,r.v_)(t.bnum),1)])]),g,(0,a.Lk)("div",f,[802===t.ostatus_mikey?((0,a.uX)(),(0,a.CE)("button",{key:0,type:"button",onClick:e=>i.setOstatusMikey(t)}," 확인 ",8,S)):(0,a.Q3)("",!0),803===t.ostatus_mikey?((0,a.uX)(),(0,a.CE)("button",{key:1,type:"button",onClick:e=>i.setOstatusMikey(t)}," 조리중 ",8,O)):(0,a.Q3)("",!0),804===t.ostatus_mikey?((0,a.uX)(),(0,a.CE)("button",{key:2,type:"button",onClick:e=>i.setOstatusMikey(t)}," 배달시작 ",8,w)):(0,a.Q3)("",!0),805===t.ostatus_mikey?((0,a.uX)(),(0,a.CE)("button",{key:3,type:"button",onClick:e=>i.setOstatusMikey(t)}," 배달완료 ",8,X)):(0,a.Q3)("",!0),(0,a.Lk)("button",{type:"button",class:"btn",onClick:e[0]||(e[0]=t=>n.showOrderDetailModal=!0)}," 상세보기 ")]),n.showOrderDetailModal?((0,a.uX)(),(0,a.Wv)(u,{key:0,onClose:e[1]||(e[1]=t=>n.showOrderDetailModal=!1)})):(0,a.Q3)("",!0)])])])))),128))])])}var M=s(8355);const D={class:"modal",tabindex:"-1",role:"dialog",id:"orderDetailModal"},B={class:"modal-dialog",role:"document"},x={class:"modal-content"},I=(0,a.Lk)("div",{class:"modal-header"},[(0,a.Lk)("h5",{class:"modal-title"},"주문 상세 정보"),(0,a.Lk)("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[(0,a.Lk)("span",{"aria-hidden":"true"},"×")])],-1),A={class:"modal-body"},Q={class:"modal-footer"},q={class:"modal-footer"};function T(t,e,s,o,n,i){return(0,a.uX)(),(0,a.CE)("div",D,[(0,a.Lk)("div",B,[(0,a.Lk)("div",x,[I,(0,a.Lk)("div",A,[(0,a.Lk)("p",null,"전화번호: "+(0,r.v_)(s.order.phone),1),(0,a.Lk)("p",null,"주소: "+(0,r.v_)(s.order.address),1),(0,a.Lk)("p",null,"메뉴: "+(0,r.v_)(s.order.menu),1),(0,a.Lk)("p",null,"가격: "+(0,r.v_)(s.order.price),1)]),(0,a.Lk)("div",Q,[(0,a.Lk)("div",q,[(0,a.Lk)("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal",onClick:e[0]||(e[0]=t=>n.showModal=!1)}," 닫기 ")])])])])])}var F={name:"MS_B_OrderDetailModal",props:["order"],data(){return{showModal:!1}},methods:{openModal(){this.showModal=!0}}},R=s(1241);const W=(0,R.A)(F,[["render",T]]);var K=W,N={name:"B_OrdSpecCard",props:["orderStatus","bnum"],components:{MS_B_OrderDetailModal:K},data(){return{orderList:[],showOrderDetailModal:!1}},mounted(){this.fetchOrderList()},computed:{uniqueOrders(){const t={};return this.filteredOrders.forEach((e=>{t[e.osnum]||(t[e.osnum]=e)})),Object.values(t)},filteredOrders(){return this.orderStatus&&0!==this.orderStatus.length?this.orderList.filter((t=>t.ostatus_mikey===this.orderStatus&&t.bnum===this.bnum)):[]}},methods:{formatDate(t){const e=new Date(t);return e.toLocaleString()},openModal(){this.showOrderDetailModal=!0},async fetchOrderList(){try{const t=await M.A.get("/B_Ordering");this.orderList=t.data.sort(((t,e)=>new Date(e.odate)-new Date(t.odate))),console.log("Response:",t.data)}catch(t){console.error("Error fetching orderList:",t)}},async setOstatusMikey(t){try{let e;e=803===t.ostatus_mikey?804:804===t.ostatus_mikey?805:803;const s=await M.A.post("/OrderStatusUpdate",{ostatus_mikey:e,bnum:t.bnum,onum:t.onum});console.log("Response:",s.data),this.fetchOrderList()}catch(e){console.error("ostatus_mikey 값을 업데이트하는 중 오류 발생:",e)}}}};const P=(0,R.A)(N,[["render",E]]);var $=P;const j={class:"container",style:{"max-height":"500px","overflow-y":"auto"}},U={class:"row"},z={key:0,class:"card mt-3",style:{width:"18rem"}},G=(0,a.Lk)("h5",{class:"card-title"},"이미지",-1),H={class:"card-body"},J={class:"card",style:{width:"16rem"}},V={class:"list-group list-group-flush"},Y={class:"list-group-item"},Z={class:"list-group-item"},tt={class:"list-group-item"},et=(0,a.Lk)("p",null,null,-1),st=(0,a.Lk)("button",{type:"button"},"상세보기",-1);function at(t,e,s,o,n,i){return(0,a.uX)(),(0,a.CE)("div",j,[(0,a.Lk)("div",U,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.uniqueOrders,((t,e)=>((0,a.uX)(),(0,a.CE)("div",{key:e,class:"col-3 mb-3"},[t.bnum===s.bnum?((0,a.uX)(),(0,a.CE)("div",z,[G,(0,a.Lk)("div",H,[(0,a.Lk)("div",J,[(0,a.Lk)("ul",V,[(0,a.Lk)("li",Y," 주문일시: "+(0,r.v_)(i.formatDate(t.odate)),1),(0,a.Lk)("li",Z,"주문번호: "+(0,r.v_)(t.osnum),1),(0,a.Lk)("li",tt,"사업자번호: "+(0,r.v_)(t.bnum),1)])]),et,st])])):(0,a.Q3)("",!0)])))),128))])])}var rt={name:"B_Ordcard",components:{},props:{bnum:{type:Number,required:!0}},data(){return{orderList:[]}},mounted(){this.fetchOrderList()},computed:{uniqueOrders(){return this.orderList.filter((t=>t.bnum===this.bnum))}},methods:{formatDate(t){const e=new Date(t);return e.toLocaleString()},async fetchOrderList(){try{const t=await M.A.get("/B_Ordering");this.orderList=t.data.sort(((t,e)=>new Date(e.odate)-new Date(t.odate))),console.log("Response:",t.data)}catch(t){console.error("Error fetching orderList:",t)}}}};const ot=(0,R.A)(rt,[["render",at]]);var nt=ot;const it={key:2};function ut(t,e,s,r,o,n){return(0,a.uX)(),(0,a.CE)("div",null,[401===o.sstatus_mikey?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:e[0]||(e[0]=e=>t.confirmShopClosure(402,"영업을 종료하시겠습니까?")),class:"status-button"}," 운영종료하기 ")):(0,a.Q3)("",!0),402===o.sstatus_mikey?((0,a.uX)(),(0,a.CE)("button",{key:1,onClick:e[1]||(e[1]=e=>t.confirmShopClosure(401,"영업을 시작하시겠습니까?")),class:"status-button"}," 운영시작하기 ")):(0,a.Q3)("",!0),402===o.sstatus_mikey?((0,a.uX)(),(0,a.CE)("span",it,"(영업종료)")):(0,a.Q3)("",!0)])}var dt={name:"B_ShopStatus",props:["bnum"],data(){return{sstatus_mikey:null}},created(){this.fetchShopStatus()},methods:{async fetchShopStatus(){try{const t=await M.A.get("/ShopStatus",{params:{bnum:this.bnum}});this.sstatus_mikey=t.data.sstatus_mikey,console.log("Fetch Shop Status Response:",t.data)}catch(t){console.error("운영 상태 값을 가져오는 중 오류 발생:",t)}}}};const lt=(0,R.A)(dt,[["render",ut]]);var ct=lt,mt={name:"B_Ordering",components:{B_OrdSpecCard:$,B_Ordcard:nt,B_ShopStatus:ct},data(){return{tabs:[{id:"home",name:"전체",orderStatus:800,status:800},{id:"OrderReady",name:"주문수락대기",orderStatus:802,status:802},{id:"Preparing",name:"조리중",orderStatus:803,status:803},{id:"Start",name:"배달시작",orderStatus:804,status:804},{id:"contact",name:"배달완료",orderStatus:805,status:805}],activeTabIndex:0,bnum:1003,orderList:[]}},mounted(){const t=this.$route.query.status;t&&(this.activeTabIndex=t-1)},methods:{changeTab(t){this.activeTabIndex=t}},computed:{filteredOrders(){const t=Number(this.$route.query.status);return 800===t?this.orderList:this.orderList.filter((e=>e.ostatus_mikey===this.tabs[t-1].orderStatus&&e.bnum===this.bnum))}}};const bt=(0,R.A)(mt,[["render",c]]);var kt=bt}}]);
//# sourceMappingURL=707.7942e80b.js.map