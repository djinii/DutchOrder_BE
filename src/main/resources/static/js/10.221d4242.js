"use strict";(self["webpackChunkv2_client"]=self["webpackChunkv2_client"]||[]).push([[10],{7010:function(e,t,s){s.r(t),s.d(t,{default:function(){return I}});var a=s(6768),n=s(5130);const m=e=>((0,a.Qi)("data-v-3f87c992"),e=e(),(0,a.jt)(),e),l={class:"container mt-5"},o=m((()=>(0,a.Lk)("h2",{class:"mb-4"},"개인정보수정",-1))),i={class:"mb-3"},r=m((()=>(0,a.Lk)("label",{for:"Mname",class:"form-label"},"이름",-1))),c={class:"mb-3"},u=m((()=>(0,a.Lk)("label",{for:"memail",class:"form-label"},"이메일",-1))),d={class:"mb-3"},h=m((()=>(0,a.Lk)("label",{for:"mtel",class:"form-label"},"연락처",-1))),p=m((()=>(0,a.Lk)("small",{class:"text-muted"},"예시: 010-1234-5678",-1))),b={class:"form-buttons"},f=["disabled"];function k(e,t,s,m,k,g){return(0,a.uX)(),(0,a.CE)("div",l,[o,(0,a.Lk)("form",{onSubmit:t[1]||(t[1]=(0,n.D$)(((...t)=>e.submitForm&&e.submitForm(...t)),["prevent"]))},[(0,a.Lk)("div",i,[r,(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>k.mname=e),class:"form-control",id:"mname",required:"",disabled:""},null,512),[[n.Jo,k.mname]])])],32),(0,a.Lk)("div",c,[u,(0,a.bo)((0,a.Lk)("input",{type:"memail","onUpdate:modelValue":t[2]||(t[2]=e=>k.memail=e),class:"form-control",id:"memail",required:"",disabled:""},null,512),[[n.Jo,k.memail]])]),(0,a.Lk)("div",d,[h,(0,a.bo)((0,a.Lk)("input",{type:"tel","onUpdate:modelValue":t[3]||(t[3]=e=>k.mtel=e),class:"form-control",id:"mtel",pattern:"[0-9]{3}-[0-9]{4}-[0-9]{4}",required:"",onInput:t[4]||(t[4]=(...e)=>g.enableTelChange&&g.enableTelChange(...e))},null,544),[[n.Jo,k.mtel]]),p]),(0,a.Lk)("div",b,[(0,a.Lk)("button",{type:"submit",class:"btn btn-primary withdraw",onClick:t[5]||(t[5]=(...e)=>g.updateAccountStatus&&g.updateAccountStatus(...e))}," 탈퇴하기 "),(0,a.Lk)("button",{type:"submit",class:"btn btn-primary",onClick:t[6]||(t[6]=(...e)=>g.updateUserInfo&&g.updateUserInfo(...e)),disabled:!k.isTelChanged}," 수정하기 ",8,f)])])}s(4114);var g=s(8355),L={data(){return{mnum:"",mname:"",mnic:"",memail:"",mtel:"",error:"",isTelChanged:!1}},async mounted(){await this.fetchUserInfo()},methods:{async fetchUserInfo(){try{const e=this.$store.getters.getUserMnum;console.log("mnum : "+e);const t=await g.A.get(`/updateInfo/${e}`);console.log("response : "+t);const{mname:s,mnic:a,memail:n,mtel:m}=t.data;console.log("response.data : "+t.data),this.mnum=e,this.mname=s,this.mnic=a,this.memail=n,this.mtel=m}catch(e){console.error("사용자 정보를 불러오는데 실패했습니다.",e),this.error="사용자 정보를 불러오는 중 오류가 발생했습니다."}},async updateUserInfo(){if(this.mtel.trim())try{const e={mname:this.mname,mnic:this.mnic,memail:this.memail,mtel:this.mtel};await g.A.put(`/updateInfo/${this.mnum}`,e),this.$router.push("/client/home"),alert("정보가 성공적으로 업데이트 되었습니다.")}catch(e){console.log("정보 업데이트 중 오류 발생",e),this.error=" 정보 업데이트 중 오류가 발생했습니다."}else alert("연락처를 입력하세요.")},async updateAccountStatus(){if(confirm("정말로 탈퇴하시겠습니까? 탈퇴한 계정은 복구할 수 없습니다."))try{await g.A.put(`/updateAccountStatus/${this.mnum}`),this.$store.commit("setLoginStatus",!1),this.$store.commit("setUserLevel",null),this.$store.commit("setUserMnum",null),sessionStorage.removeItem("setLoginStatus"),sessionStorage.removeItem("userLevel"),sessionStorage.removeItem("userMnum"),this.$router.push("/selectMemberType"),alert("탈퇴되었습니다. 안녕히 가세요.")}catch(e){console.log("계정 삭제 중 오류 발생",e),alert("탈퇴하는 중 오류가 발생했습니다.")}},enableTelChange(){this.isTelChanged=!0}}},v=s(1241);const y=(0,v.A)(L,[["render",k],["__scopeId","data-v-3f87c992"]]);var I=y}}]);
//# sourceMappingURL=10.221d4242.js.map