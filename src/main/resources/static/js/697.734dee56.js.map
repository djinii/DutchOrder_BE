{"version":3,"file":"js/697.734dee56.js","mappings":"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","sources":["webpack://v2_client/./src/views/client/JY_C_ReviewWrite.vue","webpack://v2_client/./src/views/client/JY_C_ReviewWrite.vue?3c01"],"sourcesContent":["\r\n<template>\r\n    <div id=\"pageName\">\r\n        <h2>리뷰작성 -개인-</h2>\r\n    </div>\r\n    <hr class=\"my-4\" />\r\n    <!-- 가게 점수주기 -->\r\n    <div id=\"starRating\" class=\"btn-group\" role=\"group\" aria-label=\"Basic radio toggle button group\">\r\n        <input type=\"radio\" class=\"btn-check\" name=\"btnradio\" id=\"btnradio1\" autocomplete=\"off\" @click=\"selectRating(1)\">\r\n        <label class=\"btn btn-outline-primary\" for=\"btnradio1\">1</label>\r\n\r\n        <input type=\"radio\" class=\"btn-check\" name=\"btnradio\" id=\"btnradio2\" autocomplete=\"off\" @click=\"selectRating(2)\">\r\n        <label class=\"btn btn-outline-primary\" for=\"btnradio2\">2</label>\r\n\r\n        <input type=\"radio\" class=\"btn-check\" name=\"btnradio\" id=\"btnradio3\" autocomplete=\"off\" @click=\"selectRating(3)\">\r\n        <label class=\"btn btn-outline-primary\" for=\"btnradio3\">3</label>\r\n\r\n        <input type=\"radio\" class=\"btn-check\" name=\"btnradio\" id=\"btnradio4\" autocomplete=\"off\" @click=\"selectRating(4)\">\r\n        <label class=\"btn btn-outline-primary\" for=\"btnradio4\">4</label>\r\n\r\n        <input type=\"radio\" class=\"btn-check\" name=\"btnradio\" id=\"btnradio5\" autocomplete=\"off\" @click=\"selectRating(5)\">\r\n        <label class=\"btn btn-outline-primary\" for=\"btnradio5\">5</label>\r\n    </div> \r\n    <h2>내 점수: {{ myRating }}</h2>\r\n    <hr class=\"my-4\" />\r\n    <!-- 리뷰 사진 첨부 -->\r\n    <div id=\"reviewImg\" class=\"custom-file\">\r\n        <input id=\"customFile\" type=\"file\" @change=\"handleFileUpload\"/>\r\n        <label class=\"custom-file-label\" for=\"customFile\">사진추가</label>\r\n    </div>\r\n    <br>\r\n    <!-- 이미지 미리보기 -->\r\n    <div id=\"imagePreview\">\r\n        <img v-if=\"imageUrl\" :src=\"imageUrl\" class=\"rounded mx-auto d-block\" style=\"max-width: 100%; max-height: 300px;\" />\r\n    </div>\r\n    <!-- 리뷰 입력란 -->\r\n    <div id=\"reviewWrite\" class=\"form-floating\">\r\n        <textarea v-model=\"reviewContent\" class=\"form-control\" :placeholder=\"contentPh\" id=\"floatingTextarea2\" style=\"height: 300px\"></textarea>\r\n        <label for=\"floatingTextarea2\">리뷰 입력</label>\r\n    </div>\r\n    <!-- 버튼 -->\r\n    <div class=\"reviewButton\">\r\n        <div id=\"liveAlertPlaceholder\">{{ message }}</div>\r\n        <button id=\"liveAlertBtn\" class=\"btn btn-primary\" @click=\"submitReviewWrite\">리뷰작성완료</button>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n    data() {\r\n        return {\r\n            info: {},\r\n            reviewContent: '',\r\n            myRating: '',\r\n            selectedFile: null,\r\n            imageUrl: null,\r\n            message: '',\r\n            ratingPh: '별점을 주세요',\r\n            contentPh: '내용을 입력하세요',\r\n        }\r\n    },\r\n    mounted() {\r\n        this.fetchWrtieInfo();\r\n    },\r\n    methods: {\r\n        async fetchWrtieInfo() {\r\n            try {\r\n            // HTTP POST 요청을 통해 리뷰 세부 정보를 가져옴\r\n                const response = await axios.post('/JY_C_WriteInfo', { onum: this.$route.query.onum }); \r\n                // 가져온 세부 정보를 저장\r\n                this.info = response.data;\r\n                this.mnum = this.info.mnum; // mnum 할당\r\n                this.bnum = this.info.bnum; // bnum 할당\r\n                console.log('Response:', response.data);\r\n\r\n            } catch (error) {\r\n                console.error('Error fetching writeInfo:', error);\r\n            }\r\n        },\r\n\r\n        async handleFileUpload(event) {\r\n            this.selectedFile = event.target.files[0];\r\n            \r\n            // 이미지 미리보기 표시\r\n            const reader = new FileReader();\r\n            reader.onload = () => {\r\n                this.imageUrl = reader.result;\r\n            };\r\n            reader.readAsDataURL(this.selectedFile);\r\n        },\r\n\r\n        // 작성완료 클릭시 실행되는 메소드\r\n        async submitReviewWrite() {\r\n            // 별점, 내용칸이 비어있으면 해당 알림이 뜨도록 설정\r\n            if (isNaN(this.myRating)) {\r\n                this.message = this.ratingPh;\r\n                return;\r\n            }\r\n            if (this.reviewContent.trim() === '') {\r\n                this.message = this.contentPh;\r\n                return;\r\n            }\r\n\r\n            const currentTime = new Date(); // 현재 시간\r\n\r\n            try {\r\n                // 이미지가 선택되었을 때만 이미지를 서버에 업로드하고 이미지 경로를 리뷰 데이터에 추가\r\n                if (this.selectedFile) {\r\n                    // 이미지를 서버에 업로드\r\n                    const formData = new FormData();\r\n                    formData.append('image', this.selectedFile);\r\n                    const config = {\r\n                        headers: {\r\n                            'content-type': 'multipart/form-data'\r\n                        }\r\n                    };\r\n                    const response = await axios.post('/upload/image', formData, config);\r\n                     this.imageUrl = response.data.filePath; // 이미지 경로 할당\r\n                }\r\n\r\n                const reviewData = {\r\n                    mnum: this.mnum,\r\n                    bnum: this.bnum,\r\n                    rcontent: this.reviewContent,\r\n                    rstar: this.myRating,\r\n                    rdate: currentTime.toISOString(),\r\n                    rstatus_makey: 1000,\r\n                    rstatus_mikey: 1001,\r\n                    rcomment: null,\r\n                    rimg: this.imageUrl // 이미지 경로 추가\r\n                };\r\n\r\n                const response = await axios.post('/JY_C_ReviewWrite', reviewData);\r\n\r\n                // 서버로부터 응답을 받았을 때 실행할 작업\r\n                console.log(response.data); // 서버 응답 확인\r\n                // 성공적으로 작성된 경우 알람이 뜸\r\n                alert('리뷰가 성공적으로 작성되었습니다.');\r\n                // 성공알람 확인후 리스트로 이동\r\n                this.$router.push('/JY_C_ReviewList');\r\n            } catch (error) {\r\n                // 에러가 발생했을 때 실행할 작업\r\n                console.error('Error fetching reviewWrite', error);\r\n                // 에러 메시지 표시\r\n                alert('리뷰 작성에 실패했습니다.');\r\n            }\r\n        },\r\n        selectRating(score) {\r\n            this.myRating = score;\r\n        }   \r\n    }\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>","import { render } from \"./JY_C_ReviewWrite.vue?vue&type=template&id=407ee193\"\nimport script from \"./JY_C_ReviewWrite.vue?vue&type=script&lang=js\"\nexport * from \"./JY_C_ReviewWrite.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createElementVNode","id","class","role","for","_createElementBlock","_Fragment","_hoisted_1","_hoisted_2","_hoisted_3","type","name","autocomplete","onClick","_cache","$event","$options","selectRating","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_toDisplayString","$data","myRating","_hoisted_9","_hoisted_10","onChange","args","handleFileUpload","_hoisted_11","_hoisted_12","_hoisted_13","imageUrl","key","src","style","_hoisted_14","_createCommentVNode","_hoisted_15","reviewContent","placeholder","contentPh","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","message","submitReviewWrite","data","info","selectedFile","ratingPh","mounted","this","fetchWrtieInfo","methods","response","axios","post","onum","$route","query","mnum","bnum","console","log","error","event","target","files","reader","FileReader","onload","result","readAsDataURL","isNaN","trim","currentTime","Date","formData","FormData","append","config","headers","filePath","reviewData","rcontent","rstar","rdate","toISOString","rstatus_makey","rstatus_mikey","rcomment","rimg","alert","$router","push","score","__exports__","render"],"sourceRoot":""}