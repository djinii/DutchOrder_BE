"use strict";(self["webpackChunkv2_client"]=self["webpackChunkv2_client"]||[]).push([[816],{2816:function(e,t,s){s.r(t),s.d(t,{default:function(){return ge}});var o=s(6768),n=s(4232),a=s(5130);const l={class:"container mt-5",style:{height:"800px","overflow-y":"auto"}},i={class:"row justify-content-center"},d={class:"col-md-7 col-lg-8"},r=(0,o.Lk)("h4",{class:"mb-3"},"가게정보 수정",-1),c={class:"row g-3"},u={class:"col-sm-6"},m=(0,o.Lk)("label",{for:"ShopName",class:"form-label"},"상호명:",-1),p=["value"],f=(0,o.Lk)("div",{class:"invalid-feedback"},"Valid first name is required.",-1),b={class:"col-sm-6"},h=(0,o.Lk)("label",{for:"category",class:"form-label"},"분류:",-1),k=["value"],L=(0,o.Lk)("div",{class:"invalid-feedback"},"Valid last name is required.",-1),v={class:"col-12"},y=(0,o.Lk)("label",{for:"time",class:"form-label"},"운영시간",-1),g=(0,o.Lk)("div",{class:"invalid-feedback"},"시간을 입력해주세요.",-1),M={class:"form-group col-md-5"},C=(0,o.Lk)("label",{for:"my_number"},"전화번호",-1),_=["value"],x={class:"col-12"},N=(0,o.Lk)("label",{for:"address",class:"form-label"},"주소",-1),w=["value"],E=(0,o.Lk)("div",{class:"invalid-feedback"}," Please enter your shipping address. ",-1),I=(0,o.Lk)("button",{type:"submit",class:"btn btn-primary"},"저장",-1);function S(e,t,s,S,U,V){const B=(0,o.g2)("B_MenuPlusMD"),D=(0,o.g2)("B_MenuPluse");return(0,o.uX)(),(0,o.CE)("div",l,[(0,o.Lk)("div",i,[(0,o.Lk)("div",d,[r,(0,o.Lk)("h2",null,(0,n.v_)(U.shopName),1),(0,o.Lk)("form",{class:"needs-validation",onSubmit:t[2]||(t[2]=(0,a.D$)(((...e)=>V.submitForm&&V.submitForm(...e)),["prevent"]))},[(0,o.Lk)("div",c,[(0,o.Lk)("div",u,[m,(0,o.Lk)("input",{type:"text",class:"form-control",id:"ShopName",value:U.shopName,readonly:"",disabled:""},null,8,p),f]),(0,o.Lk)("div",b,[h,(0,o.Lk)("input",{type:"text",class:"form-control",id:"category",value:U.category,readonly:"",disabled:""},null,8,k),L]),(0,o.Lk)("div",v,[y,(0,o.bo)((0,o.Lk)("input",{type:"text",class:"form-control",id:"start",placeholder:"운영시작시간","onUpdate:modelValue":t[0]||(t[0]=e=>U.start=e),required:""},null,512),[[a.Jo,U.start]]),(0,o.bo)((0,o.Lk)("input",{type:"text",class:"form-control",id:"end",placeholder:"운영종료시간","onUpdate:modelValue":t[1]||(t[1]=e=>U.end=e),required:""},null,512),[[a.Jo,U.end]]),g]),(0,o.Lk)("div",M,[C,(0,o.Lk)("input",{type:"tel",class:"form-control",name:"my_number",id:"my_pnumber",maxlength:"13",placeholder:"전화번호",value:U.phoneNumber,readonly:"",disabled:""},null,8,_)]),(0,o.Lk)("div",x,[N,(0,o.Lk)("input",{type:"text",class:"form-control",id:"address",value:U.address,readonly:"",disabled:""},null,8,w),E]),(0,o.bF)(B,{bnum:U.bnum},null,8,["bnum"]),(0,o.bF)(D,{bnum:U.bnum,onMenuSelected:e.handleMenuSelected},null,8,["bnum","onMenuSelected"]),I])],32)])])])}const U={class:"card-body"},V={class:"card-title"},B={class:"card-text"},D={class:"card-text"},P=["onClick"],X={key:0,class:"card",style:{width:"18rem"}},q={class:"card-body"},A=(0,o.Lk)("h5",{class:"card-title"},"메뉴 수정",-1),J=(0,o.Lk)("label",{for:"optionYes"},"옵션 추가",-1),F=(0,o.Lk)("label",{for:"optionNo"},"옵션 추가 안 함",-1);function $(e,t,s,l,i,d){return(0,o.uX)(),(0,o.CE)("div",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.menus,((e,s)=>((0,o.uX)(),(0,o.CE)("div",{class:"card",key:s},[(0,o.Lk)("div",U,[(0,o.Lk)("h5",V,(0,n.v_)(e.fname),1),(0,o.Lk)("p",B,(0,n.v_)(e.fprice)+" 원",1),(0,o.Lk)("p",D,(0,n.v_)(e.finfo),1),(0,o.Lk)("button",{class:"btn btn-primary",onClick:e=>d.toggleEditCard(s)},(0,n.v_)(i.showEditCardIndex===s?"닫기":"수정하기"),9,P)]),i.showEditCardIndex===s?((0,o.uX)(),(0,o.CE)("div",X,[(0,o.Lk)("div",q,[A,(0,o.bo)((0,o.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=e=>i.editedMenu.fname=e),required:""},null,512),[[a.Jo,i.editedMenu.fname]]),(0,o.bo)((0,o.Lk)("input",{type:"number",class:"form-control","onUpdate:modelValue":t[1]||(t[1]=e=>i.editedMenu.fprice=e),required:""},null,512),[[a.Jo,i.editedMenu.fprice]]),(0,o.bo)((0,o.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[2]||(t[2]=e=>i.editedMenu.finfo=e),required:""},null,512),[[a.Jo,i.editedMenu.finfo]]),(0,o.Lk)("div",null,[(0,o.bo)((0,o.Lk)("input",{type:"radio",id:"optionYes",class:"form-check-input","onUpdate:modelValue":t[3]||(t[3]=e=>i.editedMenu.foption=e),value:"1"},null,512),[[a.XL,i.editedMenu.foption]]),J,(0,o.bo)((0,o.Lk)("input",{type:"radio",id:"optionNo",class:"form-check-input","onUpdate:modelValue":t[4]||(t[4]=e=>i.editedMenu.foption=e),value:"2"},null,512),[[a.XL,i.editedMenu.foption]]),F]),(0,o.Lk)("button",{class:"btn btn-success",onClick:t[5]||(t[5]=(...e)=>d.saveChanges&&d.saveChanges(...e))},"저장")])])):(0,o.Q3)("",!0)])))),128))])}var Y=s(8355),R={name:"B_MenuPluse",props:["bnum"],data(){return{menus:[],showEditCardIndex:-1,editedMenu:{fname:"",fprice:0,finfo:"",foption:"1"}}},created(){this.menuList()},methods:{async menuList(){try{const e=await Y.A.get(`/B_MenuInfo?bnum=${this.bnum}`);this.menus=e.data.sort(((e,t)=>new Date(t.fnum)-new Date(e.fnum))),console.log("Response: ",e.data),console.log("Menus: ",this.menus)}catch(e){console.log("Error fetching menus:",e)}},toggleEditCard(e){this.showEditCardIndex=this.showEditCardIndex===e?-1:e,this.editedMenu=-1===this.showEditCardIndex?{}:{...this.menus[e]},console.log("ShowEditCardIndex: ",this.showEditCardIndex),console.log("EditedMenu: ",this.editedMenu)},async saveChanges(){try{console.log(this.editedMenu.fnum),await Y.A.put(`/B_MenuReUpdate/${this.editedMenu.fnum}`,this.editedMenu),await this.menuList(),this.showEditCardIndex=-1,this.editedMenu={fname:"",fprice:0,finfo:"",foption:"1"},console.log("Menu saved successfully.")}catch(e){console.error("Error saving changes:",e)}}}},j=s(1241);const Q=(0,j.A)(R,[["render",$]]);var T=Q;const K=(0,o.Lk)("button",{type:"button",class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#B_MenuPlus"}," 메뉴 추가하기 ",-1),z={class:"modal fade",id:"B_MenuPlus",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},G={class:"modal-dialog"},H={class:"modal-content"},O=(0,o.Lk)("div",{class:"modal-header"},[(0,o.Lk)("h1",{class:"modal-title fs-5",id:"exampleModalLabel"}," 메뉴 추가하기 "),(0,o.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),W={class:"modal-body"},Z={class:"mb-2"},ee=(0,o.Lk)("label",{for:"menuName",class:"form-label"},"메뉴 이름",-1),te={class:"mb-3"},se=(0,o.Lk)("label",{for:"menuDescription",class:"form-label"},"메뉴 설명",-1),oe={class:"mb-3"},ne=(0,o.Lk)("label",{for:"menuPrice",class:"form-label"},"메뉴 가격",-1),ae={key:0,class:"text-danger"},le={class:"mb-3"},ie=(0,o.Lk)("label",{class:"form-check-label"},"옵션 추가 여부:",-1),de={class:"form-check"},re=(0,o.Lk)("label",{for:"optionYes",class:"form-check-label"},"옵션 추가",-1),ce={class:"form-check"},ue=(0,o.Lk)("label",{for:"optionNo",class:"form-check-label"},"옵션 추가 안 함",-1),me={class:"modal-footer"},pe=(0,o.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1),fe=["disabled"];function be(e,t,s,n,l,i){return(0,o.uX)(),(0,o.CE)("div",null,[K,(0,o.Lk)("div",z,[(0,o.Lk)("div",G,[(0,o.Lk)("div",H,[O,(0,o.Lk)("div",W,[(0,o.Lk)("form",{onSubmit:t[6]||(t[6]=(0,a.D$)(((...e)=>i.saveChanges&&i.saveChanges(...e)),["prevent"]))},[(0,o.Lk)("div",Z,[ee,(0,o.bo)((0,o.Lk)("input",{type:"text",class:"form-control",id:"menuName","onUpdate:modelValue":t[0]||(t[0]=e=>l.fname=e),required:""},null,512),[[a.Jo,l.fname]])]),(0,o.Lk)("div",te,[se,(0,o.bo)((0,o.Lk)("textarea",{class:"form-control",id:"menuDescription","onUpdate:modelValue":t[1]||(t[1]=e=>l.finfo=e),required:""},null,512),[[a.Jo,l.finfo]])]),(0,o.Lk)("div",oe,[ne,(0,o.bo)((0,o.Lk)("input",{type:"text",class:"form-control",id:"menuPrice","onUpdate:modelValue":t[2]||(t[2]=e=>l.fprice=e),required:"",pattern:"[0-9,]+",onInput:t[3]||(t[3]=(...e)=>i.checkIfNumber&&i.checkIfNumber(...e))},null,544),[[a.Jo,l.fprice]]),l.isNumber?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",ae," 숫자만 입력해주세요. "))]),(0,o.Lk)("div",le,[ie,(0,o.Lk)("div",de,[(0,o.bo)((0,o.Lk)("input",{type:"radio",id:"optionYes",class:"form-check-input","onUpdate:modelValue":t[4]||(t[4]=e=>l.foption=e),value:"1"},null,512),[[a.XL,l.foption]]),re]),(0,o.Lk)("div",ce,[(0,o.bo)((0,o.Lk)("input",{type:"radio",id:"optionNo",class:"form-check-input","onUpdate:modelValue":t[5]||(t[5]=e=>l.foption=e),value:"2"},null,512),[[a.XL,l.foption]]),ue])])],32)]),(0,o.Lk)("div",me,[pe,(0,o.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t[7]||(t[7]=(...e)=>i.saveChanges&&i.saveChanges(...e)),disabled:!l.isNumber}," Save changes ",8,fe)])])])])])}var he={name:"B_MenuPlusMD",props:["bnum","fnum"],data(){return{fname:"",finfo:"",fprice:"",foption:"2",isNumber:!0}},methods:{checkIfNumber(){const e=this.fprice.replace(/\D/g,"");this.fprice=Number(e).toLocaleString(),this.isNumber=/^[0-9,]+$/.test(e)},saveChanges(){if(!this.isNumber)return;const e=new FormData;e.append("fname",this.fname),e.append("finfo",this.finfo),e.append("fprice",this.fprice.replace(/,/g,"")),e.append("foption",this.foption),e.append("bnum",this.bnum),Y.A.post("/MenuInsert",e,{headers:{"Content-Type":"application/json"}}).then((e=>{console.log("메뉴 추가 성공:",e.data)})).catch((e=>{console.error("메뉴 추가 실패:",e)}))}}};const ke=(0,j.A)(he,[["render",be]]);var Le=ke,ve={name:"B_ShopRevise",components:{B_MenuPlusMD:Le,B_MenuPluse:T},data(){return{shop:[],category:"",start:"",end:"",bnum:1003,shopName:"",phoneNumber:"",address:""}},created(){this.fetchStoreInfo(this.bnum)},methods:{handleMenuSaved(){console.log("메뉴가 저장되었습니다.")},fetchStoreInfo(e){Y.A.get(`/B_ShopDetail?bnum=${e}`).then((e=>{this.shop=e.data,this.shopName=this.shop.sname,this.category=this.shop.fcategory_mikey,this.phoneNumber=this.shop.stel,this.address=this.shop.saddr,this.start=this.shop.start_time,this.end=this.shop.end_time})).catch((e=>{console.error("가게 정보 가져오기 실패:",e)}))},submitForm(){const e={bnum:this.bnum,start_time:this.start,end_time:this.end};Y.A.post("/B_ShopTimeUpdate",e).then((e=>{console.log("서버 응답:",e.data)})).catch((e=>{console.error("서버 요청 실패:",e)}))}}};const ye=(0,j.A)(ve,[["render",S]]);var ge=ye}}]);
//# sourceMappingURL=816.2d7ab902.js.map