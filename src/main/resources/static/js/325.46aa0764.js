"use strict";(self["webpackChunkv2_client"]=self["webpackChunkv2_client"]||[]).push([[325],{3325:function(t,e,s){s.r(e),s.d(e,{default:function(){return I}});var a=s(6768);const l={class:"container mt-5"},o=(0,a.Lk)("h2",{class:"mb-4"},"가게 등록",-1),i={key:0,class:"alert alert-info"},m={key:1,class:"alert alert-info"},n={key:2,class:"alert alert-success"};function r(t,e,s,r,u,c){const d=(0,a.g2)("B_ShopReg");return(0,a.uX)(),(0,a.CE)("div",l,[o,c.shouldShowFileRegistrationSection?((0,a.uX)(),(0,a.CE)("div",i,[(0,a.bF)(d,{mnum:u.mnum},null,8,["mnum"])])):501===u.shopStatus.bstaus_mikey?((0,a.uX)(),(0,a.CE)("div",m," 가게 등록 승인 중입니다. ")):502===u.shopStatus.bstaus_mikey?((0,a.uX)(),(0,a.CE)("div",n," 가게 등록이 승인 되었습니다. ")):(0,a.Q3)("",!0)])}var u=s(8355),c=s(5130);const d={class:"mb-3"},h=(0,a.Lk)("label",{for:"sname",class:"form-label"},"식당명",-1),k={class:"mb-3"},p=(0,a.Lk)("label",{for:"fcategory_mikey",class:"form-label"},"가게 분류",-1),g=(0,a.Lk)("option",{value:"301"},"한식",-1),b=(0,a.Lk)("option",{value:"302"},"중식",-1),f=(0,a.Lk)("option",{value:"303"},"일식",-1),y=(0,a.Lk)("option",{value:"304"},"분식",-1),v=[g,b,f,y],_={class:"mb-3"},L=(0,a.Lk)("label",{for:"saddr",class:"form-label"},"주소",-1),S={class:"mb-3"},w=(0,a.Lk)("label",{for:"stel",class:"form-label"},"전화번호",-1),F={class:"mb-3"},U=(0,a.Lk)("label",{for:"start_time",class:"form-label"},"운영시간 시작",-1),R={class:"mb-3"},x=(0,a.Lk)("label",{for:"end_time",class:"form-label"},"운영시간 종료",-1),C={id:"reviewImg",class:"custom-file"},A=(0,a.Lk)("label",{class:"custom-file-label",for:"customFile"},[(0,a.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"50",height:"50",fill:"currentColor",class:"bi bi-card-image",viewBox:"0 0 16 16"},[(0,a.Lk)("path",{d:"M6.002 5.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0"}),(0,a.Lk)("path",{d:"M1.5 2A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h13a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2zm13 1a.5.5 0 0 1 .5.5v6l-3.775-1.947a.5.5 0 0 0-.577.093l-3.71 3.71-2.66-1.772a.5.5 0 0 0-.63.062L1.002 12v.54L1 12.5v-9a.5.5 0 0 1 .5-.5z"})])],-1),B={id:"imagePreview"},E=["src"];function V(t,e,s,l,o,i){return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.Lk)("div",d,[h,(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>o.sname=t),class:"form-control",id:"sname"},null,512),[[c.Jo,o.sname]])]),(0,a.Lk)("div",k,[p,(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":e[1]||(e[1]=t=>o.fcategory_mikey=t),class:"form-select",id:"fcategory_mikey"},v,512),[[c.u1,o.fcategory_mikey]])]),(0,a.Lk)("div",_,[L,(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=t=>o.saddr=t),class:"form-control",id:"saddr"},null,512),[[c.Jo,o.saddr]])]),(0,a.Lk)("div",S,[w,(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=t=>o.stel=t),class:"form-control",id:"stel"},null,512),[[c.Jo,o.stel]])]),(0,a.Lk)("div",F,[U,(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=t=>o.start_time=t),class:"form-control",id:"start_time"},null,512),[[c.Jo,o.start_time]])]),(0,a.Lk)("div",R,[x,(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":e[5]||(e[5]=t=>o.end_time=t),class:"form-control",id:"end_time"},null,512),[[c.Jo,o.end_time]])]),(0,a.Lk)("div",C,[(0,a.Lk)("input",{id:"customFile",type:"file",ref:"image",onChange:e[6]||(e[6]=(...t)=>i.upload&&i.upload(...t))},null,544),A]),(0,a.Lk)("div",B,[o.imageUrl?((0,a.uX)(),(0,a.CE)("img",{key:0,src:o.imageUrl,class:"rounded mx-auto d-block",style:{"max-width":"100%","max-height":"300px"}},null,8,E)):(0,a.Q3)("",!0)]),(0,a.Lk)("button",{onClick:e[7]||(e[7]=(...t)=>i.submitRegistrationForm&&i.submitRegistrationForm(...t)),class:"btn btn-primary"}," 가게 등록 ")])}var X={name:"B_ShopReg",props:{mnum:Number},data(){return{sname:"",fcategory_mikey:"301",saddr:"",stel:"",start_time:"",end_time:"",imageUrl:null,simg1:null}},mounted(){console.log("Received mnum:",this.mnum)},methods:{async upload(){if(this.image=this.$refs.image.files[0],console.log(this.image),!this.image)return;const t=new FileReader;t.onload=t=>{this.imageUrl=t.target.result},t.readAsDataURL(this.image)},async submitRegistrationForm(){try{const t={bnum:this.mnum,sname:this.sname,fcategory_mikey:this.fcategory_mikey,saddr:this.saddr,stel:this.stel,start_time:this.start_time,end_time:this.end_time,simg1:this.imageUrl,simg2:null,simg3:null,sconfirm:null,mnum:this.mnum,fcategory_makey:300,sstatus_makey:400,sstatus_mikey:400,bstaus_makey:500,bstaus_mikey:500,bid:"1"};this.imageUrl&&(t.simg1=this.imageUrl),console.log("formData->"+t);const e=await u.A.post("/ShopReg",t);console.log("가게 등록 완료:",e.data),alert("가게가 성공적으로 등록되었습니다.")}catch(t){console.error("가게 등록 오류:",t),alert("리뷰 작성에 실패했습니다.")}}}},J=s(1241);const D=(0,J.A)(X,[["render",V]]);var z=D,M={name:"B_Files",components:{B_ShopReg:z},data(){return{shopStatus:null,bFiles:null,mnum:1011}},mounted(){this.fetchShopStatus()},computed:{shouldShowFileRegistrationSection(){return!this.shopStatus||!this.shopStatus.bstaus_mikey||null===this.mnum}},methods:{async fetchShopStatus(){try{const t=await u.A.post("/ShopAcceptStatus",{mnum:this.mnum});this.shopStatus=t.data,console.log("상태:",this.shopStatus)}catch(t){console.error("상태를 불러오는 중 오류 발생:",t)}},async fetchbFileDetail(){try{const t=await u.A.post("/BFileDetail",{mnum:this.mnum});this.bFiles=t.data,console.log("상태:",this.bFiles)}catch(t){console.error("상태를 불러오는 중 오류 발생:",t)}}}};const Q=(0,J.A)(M,[["render",r]]);var I=Q}}]);
//# sourceMappingURL=325.46aa0764.js.map