"use strict";(self["webpackChunkv2_client"]=self["webpackChunkv2_client"]||[]).push([[660],{3660:function(t,e,i){i.r(e),i.d(e,{default:function(){return P}});var n=i(6768),a=i(4232),l=i(5130);const o=(0,n.Lk)("div",{id:"pageName"},[(0,n.Lk)("h2",null,"리뷰작성 -개인-")],-1),r=(0,n.Lk)("hr",{class:"my-4"},null,-1),s={id:"starRating",class:"btn-group",role:"group","aria-label":"Basic radio toggle button group"},c=(0,n.Lk)("label",{class:"btn btn-outline-primary",for:"btnradio1"},"1",-1),u=(0,n.Lk)("label",{class:"btn btn-outline-primary",for:"btnradio2"},"2",-1),d=(0,n.Lk)("label",{class:"btn btn-outline-primary",for:"btnradio3"},"3",-1),m=(0,n.Lk)("label",{class:"btn btn-outline-primary",for:"btnradio4"},"4",-1),h=(0,n.Lk)("label",{class:"btn btn-outline-primary",for:"btnradio5"},"5",-1),b=(0,n.Lk)("hr",{class:"my-4"},null,-1),f={id:"reviewImg",class:"custom-file"},g=(0,n.Lk)("label",{class:"custom-file-label",for:"customFile"},"사진추가",-1),k=(0,n.Lk)("br",null,null,-1),p={id:"imagePreview"},v=["src"],y={id:"reviewWrite",class:"form-floating"},L=["placeholder"],w=(0,n.Lk)("label",{for:"floatingTextarea2"},"리뷰 입력",-1),R={class:"reviewButton"},C={id:"liveAlertPlaceholder"};function F(t,e,i,F,_,U){return(0,n.uX)(),(0,n.CE)(n.FK,null,[o,r,(0,n.Lk)("div",s,[(0,n.Lk)("input",{type:"radio",class:"btn-check",name:"btnradio",id:"btnradio1",autocomplete:"off",onClick:e[0]||(e[0]=t=>U.selectRating(1))}),c,(0,n.Lk)("input",{type:"radio",class:"btn-check",name:"btnradio",id:"btnradio2",autocomplete:"off",onClick:e[1]||(e[1]=t=>U.selectRating(2))}),u,(0,n.Lk)("input",{type:"radio",class:"btn-check",name:"btnradio",id:"btnradio3",autocomplete:"off",onClick:e[2]||(e[2]=t=>U.selectRating(3))}),d,(0,n.Lk)("input",{type:"radio",class:"btn-check",name:"btnradio",id:"btnradio4",autocomplete:"off",onClick:e[3]||(e[3]=t=>U.selectRating(4))}),m,(0,n.Lk)("input",{type:"radio",class:"btn-check",name:"btnradio",id:"btnradio5",autocomplete:"off",onClick:e[4]||(e[4]=t=>U.selectRating(5))}),h]),(0,n.Lk)("h2",null,"내 점수: "+(0,a.v_)(_.myRating),1),b,(0,n.Lk)("div",f,[(0,n.Lk)("input",{id:"customFile",type:"file",onChange:e[5]||(e[5]=(...t)=>U.handleFileUpload&&U.handleFileUpload(...t))},null,32),g]),k,(0,n.Lk)("div",p,[_.imageUrl?((0,n.uX)(),(0,n.CE)("img",{key:0,src:_.imageUrl,class:"rounded mx-auto d-block",style:{"max-width":"100%","max-height":"300px"}},null,8,v)):(0,n.Q3)("",!0)]),(0,n.Lk)("div",y,[(0,n.bo)((0,n.Lk)("textarea",{"onUpdate:modelValue":e[6]||(e[6]=t=>_.reviewContent=t),class:"form-control",placeholder:_.contentPh,id:"floatingTextarea2",style:{height:"300px"}},null,8,L),[[l.Jo,_.reviewContent]]),w]),(0,n.Lk)("div",R,[(0,n.Lk)("div",C,(0,a.v_)(_.message),1),(0,n.Lk)("button",{id:"liveAlertBtn",class:"btn btn-primary",onClick:e[7]||(e[7]=(...t)=>U.submitReviewWrite&&U.submitReviewWrite(...t))},"리뷰작성완료")])],64)}i(4114);var _=i(8355),U={data(){return{info:{},reviewContent:"",myRating:"",selectedFile:null,imageUrl:null,message:"",ratingPh:"별점을 주세요",contentPh:"내용을 입력하세요"}},mounted(){this.fetchWrtieInfo()},methods:{async fetchWrtieInfo(){try{const t=await _.A.post("/JY_C_WriteInfo",{onum:this.$route.query.onum});this.info=t.data,this.mnum=this.info.mnum,this.bnum=this.info.bnum,this.onum=this.info.onum,console.log("kkk Response:",t.data)}catch(t){console.error("Error fetching writeInfo:",t)}},async handleFileUpload(t){this.selectedFile=t.target.files[0];const e=new FileReader;e.onload=()=>{this.imageUrl=e.result},e.readAsDataURL(this.selectedFile)},async submitReviewWrite(){if(!this.myRating)return void(this.message=this.ratingPh);if(""===this.reviewContent.trim())return void(this.message=this.contentPh);const t=new Date;try{if(this.selectedFile){const t=new FormData;t.append("image",this.selectedFile);const e={headers:{"content-type":"multipart/form-data"}},i=await _.A.post("/upload/image",t,e);this.imageUrl=i.data.filePath}const e={onum:this.onum,mnum:this.mnum,bnum:this.bnum,rcontent:this.reviewContent,rstar:this.myRating,rdate:t.toISOString(),rstatus_makey:1e3,rstatus_mikey:1001,rcomment:null,rimg:this.imageUrl};console.log("reviewData->"+e);const i=await _.A.post("/JY_C_ReviewWrite",e);console.log(i.data),alert("리뷰가 성공적으로 작성되었습니다."),this.$router.push("/JY_C_ReviewList")}catch(e){console.error("Error fetching reviewWrite",e),alert("리뷰 작성에 실패했습니다.")}},selectRating(t){this.myRating=t}}},W=i(1241);const x=(0,W.A)(U,[["render",F]]);var P=x}}]);
//# sourceMappingURL=660.40984359.js.map