{"version":3,"file":"js/356.b3b528ae.js","mappings":"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","sources":["webpack://v2_client/./src/views/client/JY_C_ReviewWrite.vue","webpack://v2_client/./src/views/client/JY_C_ReviewWrite.vue?3c01"],"sourcesContent":["\r\n<template>\r\n    <div id=\"pageName\">\r\n        <h2>리뷰작성 -개인-</h2>\r\n    </div>\r\n    <hr class=\"my-4\" />\r\n    <!-- 가게 점수주기 -->\r\n    <div id=\"starRating\" class=\"btn-group\" role=\"group\" aria-label=\"Basic radio toggle button group\">\r\n        <input type=\"radio\" class=\"btn-check\" name=\"btnradio\" id=\"btnradio1\" autocomplete=\"off\" @click=\"selectRating(1)\">\r\n        <label class=\"btn btn-outline-primary\" for=\"btnradio1\">1</label>\r\n\r\n        <input type=\"radio\" class=\"btn-check\" name=\"btnradio\" id=\"btnradio2\" autocomplete=\"off\" @click=\"selectRating(2)\">\r\n        <label class=\"btn btn-outline-primary\" for=\"btnradio2\">2</label>\r\n\r\n        <input type=\"radio\" class=\"btn-check\" name=\"btnradio\" id=\"btnradio3\" autocomplete=\"off\" @click=\"selectRating(3)\">\r\n        <label class=\"btn btn-outline-primary\" for=\"btnradio3\">3</label>\r\n\r\n        <input type=\"radio\" class=\"btn-check\" name=\"btnradio\" id=\"btnradio4\" autocomplete=\"off\" @click=\"selectRating(4)\">\r\n        <label class=\"btn btn-outline-primary\" for=\"btnradio4\">4</label>\r\n\r\n        <input type=\"radio\" class=\"btn-check\" name=\"btnradio\" id=\"btnradio5\" autocomplete=\"off\" @click=\"selectRating(5)\">\r\n        <label class=\"btn btn-outline-primary\" for=\"btnradio5\">5</label>\r\n    </div> \r\n    <h2>내 점수: {{ myRating }}</h2>\r\n    <hr class=\"my-4\" />\r\n    <!-- 리뷰 사진 첨부 -->\r\n    <div id=\"reviewImg\" class=\"custom-file\">\r\n        <input id=\"customFile\" type=\"file\" ref=\"image\" @change=\"upload\"/>\r\n        <label class=\"custom-file-label\" for=\"customFile\">사진추가</label>\r\n    </div>\r\n    <br>\r\n    <!-- 이미지 미리보기 -->\r\n    <div id=\"imagePreview\">\r\n        <img v-if=\"imageUrl\" :src=\"imageUrl\" class=\"rounded mx-auto d-block\" style=\"max-width: 100%; max-height: 300px;\" />\r\n    </div>\r\n    <!-- 리뷰 입력란 -->\r\n    <div id=\"reviewWrite\" class=\"form-floating\">\r\n        <textarea v-model=\"reviewContent\" class=\"form-control\" :placeholder=\"contentPh\" id=\"floatingTextarea2\" style=\"height: 300px\"></textarea>\r\n        <label for=\"floatingTextarea2\">리뷰 입력</label>\r\n    </div>\r\n    <!-- 버튼 -->\r\n    <div class=\"reviewButton\">\r\n        <div id=\"liveAlertPlaceholder\">{{ message }}</div>\r\n        <button id=\"liveAlertBtn\" class=\"btn btn-primary\" @click=\"submitReviewWrite\">리뷰작성완료</button>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n    data() {\r\n        return {\r\n            info: {},\r\n            reviewContent: '',\r\n            myRating: '',\r\n            image: null,\r\n            imageUrl: null,\r\n            message: '',\r\n            ratingPh: '별점을 주세요',\r\n            contentPh: '내용을 입력하세요',\r\n        }\r\n    },\r\n    mounted() {\r\n        this.fetchWrtieInfo();\r\n    },\r\n    methods: {\r\n        async fetchWrtieInfo() {\r\n            try {\r\n            // HTTP POST 요청을 통해 리뷰 세부 정보를 가져옴\r\n                const response = await axios.post('/JY_C_WriteInfo', { onum: this.$route.query.onum}); \r\n                // 가져온 세부 정보를 저장\r\n                this.info = response.data;\r\n                this.mnum = this.info.mnum; // mnum 할당\r\n                this.bnum = this.info.bnum; // bnum 할당\r\n                this.onum = this.info.onum; // onum 할당\r\n                console.log('kkk Response:', response.data);\r\n\r\n            } catch (error) {\r\n                console.error('Error fetching writeInfo:', error);\r\n            }\r\n        },\r\n        // 사진 URL변환 메소드\r\n        async upload() {\r\n            this.image = this.$refs.image.files[0]; // 사용자가 올린 이미지\r\n            console.log(this.image);\r\n            if (!this.image) return; // 이미지가 없는 경우 처리\r\n            this.imageUrl = URL.createObjectURL(this.image); // 이미지 URL 생성\r\n        },\r\n\r\n        // 작성완료 클릭시 실행되는 메소드\r\n        async submitReviewWrite() {\r\n            // 별점, 내용칸이 비어있으면 해당 알림이 뜨도록 설정\r\n            if (!this.myRating) {\r\n                this.message = this.ratingPh;\r\n                return;\r\n            }\r\n            if (this.reviewContent.trim() === '') {\r\n                this.message = this.contentPh;\r\n                return;\r\n            }\r\n\r\n            try {\r\n\r\n                // 이미지 업로드\r\n                await this.upload();\r\n\r\n                const currentTime = new Date(); // 현재 시간\r\n                const reviewData = {\r\n                    onum: this.onum,\r\n                    mnum: this.mnum,\r\n                    bnum: this.bnum,\r\n                    rcontent: this.reviewContent,\r\n                    rstar: this.myRating,\r\n                    rdate: currentTime.toISOString(),\r\n                    rstatus_makey: 1000,\r\n                    rstatus_mikey: 1001,\r\n                    rcomment: null,\r\n                };\r\n                // 이미지가 존재하는 경우에만 이미지 URL 추가\r\n                if (this.imageUrl) {\r\n                    reviewData.rimg = this.imageUrl;\r\n                }\r\n                console.log(\"reviewData->\"+reviewData); // 서버 응답 확인\r\n\r\n                const response = await axios.post('/JY_C_ReviewWrite', reviewData);\r\n\r\n                // 서버로부터 응답을 받았을 때 실행할 작업\r\n                console.log(response.data); // 서버 응답 확인\r\n                // 성공적으로 작성된 경우 알람이 뜸\r\n                alert('리뷰가 성공적으로 작성되었습니다.');\r\n                // 성공알람 확인후 리스트로 이동\r\n                this.$router.push('/JY_C_ReviewList');\r\n            } catch (error) {\r\n                // 에러가 발생했을 때 실행할 작업\r\n                console.error('Error fetching reviewWrite', error);\r\n                // 에러 메시지 표시\r\n                alert('리뷰 작성에 실패했습니다.');\r\n            }\r\n        },\r\n        selectRating(score) {\r\n            this.myRating = score;\r\n        }   \r\n    }\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>","import { render } from \"./JY_C_ReviewWrite.vue?vue&type=template&id=27745583\"\nimport script from \"./JY_C_ReviewWrite.vue?vue&type=script&lang=js\"\nexport * from \"./JY_C_ReviewWrite.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createElementVNode","id","class","role","for","_createElementBlock","_Fragment","_hoisted_1","_hoisted_2","_hoisted_3","type","name","autocomplete","onClick","_cache","$event","$options","selectRating","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_toDisplayString","$data","myRating","_hoisted_9","_hoisted_10","ref","onChange","args","upload","_hoisted_11","_hoisted_12","_hoisted_13","imageUrl","key","src","style","_hoisted_14","_createCommentVNode","_hoisted_15","reviewContent","placeholder","contentPh","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","message","submitReviewWrite","data","info","image","ratingPh","mounted","this","fetchWrtieInfo","methods","response","axios","post","onum","$route","query","mnum","bnum","console","log","error","$refs","files","URL","createObjectURL","trim","currentTime","Date","reviewData","rcontent","rstar","rdate","toISOString","rstatus_makey","rstatus_mikey","rcomment","rimg","alert","$router","push","score","__exports__","render"],"sourceRoot":""}