"use strict";(self["webpackChunkv2_client"]=self["webpackChunkv2_client"]||[]).push([[595],{2595:function(e,t,s){s.r(t),s.d(t,{default:function(){return Se}});var l=s(6768),a=s(4232),o=s(5130);const n={class:"container mt-5",style:{"overflow-y":"auto"}},i={class:"row justify-content-center"},d={class:"col-md-7 col-lg-8"},r=(0,l.Lk)("h4",{class:"mb-3"},"가게정보 수정",-1),u={id:"imagePreview"},c=["src"],m={class:"row g-3"},h={class:"col-sm-6"},p=(0,l.Lk)("label",{for:"ShopName",class:"form-label"},"상호명:",-1),f=["value"],b=(0,l.Lk)("div",{class:"invalid-feedback"},"Valid first name is required.",-1),k={class:"col-sm-6"},g=(0,l.Lk)("label",{for:"category",class:"form-label"},"분류:",-1),L=["value"],v=(0,l.Lk)("div",{class:"invalid-feedback"},"Valid last name is required.",-1),y={class:"col-12"},M=(0,l.Lk)("label",{for:"time",class:"form-label"},"운영시간",-1),w=(0,l.Lk)("div",{class:"invalid-feedback"},"시간을 입력해주세요.",-1),x={class:"form-group col-md-5"},C=(0,l.Lk)("label",{for:"my_number"},"전화번호",-1),_=["value"],U={class:"col-12"},E=(0,l.Lk)("label",{for:"address",class:"form-label"},"주소",-1),I=["value"],B=(0,l.Lk)("div",{class:"invalid-feedback"}," Please enter your shipping address. ",-1),A=(0,l.Lk)("button",{type:"submit",class:"btn btn-primary"},"저장",-1);function D(e,t,s,D,N,P){const X=(0,l.g2)("B_MenuPlusMD"),V=(0,l.g2)("B_MenuPluse");return(0,l.uX)(),(0,l.CE)("div",n,[(0,l.Lk)("div",i,[(0,l.Lk)("div",d,[r,(0,l.Lk)("h2",null,(0,a.v_)(N.shop.sname),1),(0,l.Lk)("div",u,[N.shop.simg1?((0,l.uX)(),(0,l.CE)("img",{key:0,src:N.shop.simg1,class:"rounded mx-auto d-block",style:{"max-width":"100%","max-height":"300px"}},null,8,c)):(0,l.Q3)("",!0)]),(0,l.Lk)("form",{class:"needs-validation",onSubmit:t[2]||(t[2]=(0,o.D$)(((...e)=>P.submitForm&&P.submitForm(...e)),["prevent"]))},[(0,l.Lk)("div",m,[(0,l.Lk)("div",h,[p,(0,l.Lk)("input",{type:"text",class:"form-control",id:"ShopName",value:N.shop.sname,readonly:"",disabled:""},null,8,f),b]),(0,l.Lk)("div",k,[g,(0,l.Lk)("input",{type:"text",class:"form-control",id:"category",value:N.shop.fcategory_mikey,readonly:"",disabled:""},null,8,L),v]),(0,l.Lk)("div",y,[M,(0,l.bo)((0,l.Lk)("input",{type:"text",class:"form-control",id:"start",placeholder:"운영시작시간","onUpdate:modelValue":t[0]||(t[0]=e=>N.shop.start_time=e),required:""},null,512),[[o.Jo,N.shop.start_time]]),(0,l.bo)((0,l.Lk)("input",{type:"text",class:"form-control",id:"end",placeholder:"운영종료시간","onUpdate:modelValue":t[1]||(t[1]=e=>N.shop.end_time=e),required:""},null,512),[[o.Jo,N.shop.end_time]]),w]),(0,l.Lk)("div",x,[C,(0,l.Lk)("input",{type:"tel",class:"form-control",name:"my_number",id:"my_pnumber",maxlength:"13",placeholder:"전화번호",value:N.shop.stel,readonly:"",disabled:""},null,8,_)]),(0,l.Lk)("div",U,[E,(0,l.Lk)("input",{type:"text",class:"form-control",id:"address",value:N.shop.saddr,readonly:"",disabled:""},null,8,I),B]),(0,l.bF)(X,{bnum:this.shop.bnum},null,8,["bnum"]),(0,l.bF)(V,{bnum:this.shop.bnum},null,8,["bnum"]),A])],32)])])])}s(4114);var N=s(782);const P={class:"card-body"},X={class:"card-title"},V={class:"card-text"},F={class:"card-text"},S=["onClick"],q=["onClick"],R={key:0,class:"card",style:{width:"18rem"}},J={class:"card-body"},$=(0,l.Lk)("h5",{class:"card-title"},"메뉴 수정",-1),Q={id:"imagePreview"},z=["src"],Y={id:"MenuImg",class:"custom-file"},j=(0,l.Lk)("label",{class:"custom-file-label",for:"customFile"},[(0,l.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"50",height:"50",fill:"currentColor",class:"bi bi-card-image",viewBox:"0 0 16 16"},[(0,l.Lk)("path",{d:"M6.002 5.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0"}),(0,l.Lk)("path",{d:"M1.5 2A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h13a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2zm13 1a.5.5 0 0 1 .5.5v6l-3.775-1.947a.5.5 0 0 0-.577.093l-3.71 3.71-2.66-1.772a.5.5 0 0 0-.63.062L1.002 12v.54L1 12.5v-9a.5.5 0 0 1 .5-.5z"})])],-1),K=(0,l.Lk)("br",null,null,-1),T={id:"imagePreview"},G=["src"],H=(0,l.Lk)("p",null,"메뉴 설명",-1),O=(0,l.Lk)("label",{for:"optionYes"},"옵션 추가",-1),W=(0,l.Lk)("label",{for:"optionNo"},"옵션 추가 안 함",-1);function Z(e,t,s,n,i,d){return(0,l.uX)(),(0,l.CE)("div",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(i.menus,((e,s)=>((0,l.uX)(),(0,l.CE)("div",{class:"card",key:s},[(0,l.Lk)("div",P,[(0,l.Lk)("h5",X,(0,a.v_)(e.fname),1),(0,l.Lk)("p",V,(0,a.v_)(e.fprice.toLocaleString())+" 원",1),(0,l.Lk)("p",F,(0,a.v_)(e.finfo),1),(0,l.Lk)("div",null,[(0,l.Lk)("button",{class:"btn btn-primary",onClick:e=>d.toggleEditCard(s)},(0,a.v_)(i.showEditCardIndex===s?"닫기":"수정하기"),9,S),(0,l.Lk)("button",{class:"btn btn-danger",onClick:t=>d.confirmDelete(e.fnum)}," 삭제 ",8,q)])]),i.showEditCardIndex===s?((0,l.uX)(),(0,l.CE)("div",R,[(0,l.Lk)("div",J,[$,(0,l.Lk)("div",Q,[i.editedMenu.fimg?((0,l.uX)(),(0,l.CE)("img",{key:0,src:i.editedMenu.fimg,class:"rounded mx-auto d-block",style:{"max-width":"100%","max-height":"300px"}},null,8,z)):(0,l.Q3)("",!0)]),(0,l.Lk)("div",Y,[(0,l.Lk)("input",{id:"customFile",type:"file",ref_for:!0,ref:"image",onChange:t[0]||(t[0]=(...e)=>d.upload&&d.upload(...e))},null,544),j]),K,(0,l.Lk)("div",T,[i.imageUrl?((0,l.uX)(),(0,l.CE)("img",{key:0,src:i.imageUrl,class:"rounded mx-auto d-block",style:{"max-width":"100%","max-height":"300px"}},null,8,G)):(0,l.Q3)("",!0)]),(0,l.bo)((0,l.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[1]||(t[1]=e=>i.editedMenu.fname=e),required:""},null,512),[[o.Jo,i.editedMenu.fname]]),(0,l.bo)((0,l.Lk)("input",{type:"number",class:"form-control","onUpdate:modelValue":t[2]||(t[2]=e=>i.editedMenu.fprice=e),required:""},null,512),[[o.Jo,i.editedMenu.fprice]]),H,(0,l.bo)((0,l.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[3]||(t[3]=e=>i.editedMenu.finfo=e),required:""},null,512),[[o.Jo,i.editedMenu.finfo]]),(0,l.Lk)("div",null,[(0,l.bo)((0,l.Lk)("input",{type:"radio",id:"optionYes",class:"form-check-input","onUpdate:modelValue":t[4]||(t[4]=e=>i.editedMenu.foption=e),value:"1"},null,512),[[o.XL,i.editedMenu.foption]]),O,(0,l.bo)((0,l.Lk)("input",{type:"radio",id:"optionNo",class:"form-check-input","onUpdate:modelValue":t[5]||(t[5]=e=>i.editedMenu.foption=e),value:"2"},null,512),[[o.XL,i.editedMenu.foption]]),W]),(0,l.Lk)("button",{class:"btn btn-success",onClick:t[6]||(t[6]=(...e)=>d.saveChanges&&d.saveChanges(...e))},"저장")])])):(0,l.Q3)("",!0)])))),128))])}var ee=s(8355),te={name:"B_MenuPluse",props:["bnum"],data(){return{menus:[],showEditCardIndex:-1,editedMenu:{fname:"",fprice:0,finfo:"",foption:"1",fimg:this.imageUrl},imageUrl:null,image:null}},created(){this.menuList()},methods:{async menuList(){try{const e=await ee.A.post(`/B_MenuInfo?bnum=${this.bnum}`);this.menus=e.data.sort(((e,t)=>new Date(t.fnum)-new Date(e.fnum))),console.log("Response: ",e.data),console.log("Menus: ",this.menus)}catch(e){console.log("Error fetching menus:",e)}},async upload(){if(this.image=this.$refs.image[0].files[0],console.log(this.image),!this.image)return;const e=new FileReader;e.onload=e=>{this.imageUrl=e.target.result},e.readAsDataURL(this.image)},toggleEditCard(e){this.showEditCardIndex=this.showEditCardIndex===e?-1:e,this.editedMenu=-1===this.showEditCardIndex?{}:{...this.menus[e]},console.log("ShowEditCardIndex: ",this.showEditCardIndex),console.log("EditedMenu: ",this.editedMenu)},async saveChanges(){try{this.image&&(await this.upload(),this.editedMenu.fimg=this.imageUrl);const e=await ee.A.post("/B_MenuReUpdate",this.editedMenu);console.log("Response from B_MenuReUpdate:",e.data),await this.menuList(),this.showEditCardIndex=-1,alert("메뉴가 성공적으로 수정되었습니다."),console.log("Menu saved successfully.")}catch(e){console.error("Error saving changes:",e)}},async confirmDelete(e){confirm("정말 삭제하시겠습니까?")&&await this.deleteMenu(e)},async deleteMenu(e){try{const t=await ee.A.post("/B_MenuDelete",{fnum:e});console.log("Response from B_MenuDelete:",t.data),await this.menuList(),console.log("Menu deleted successfully."),alert("삭제되었습니다.")}catch(t){console.error("Error deleting menu:",t)}}}},se=s(1241);const le=(0,se.A)(te,[["render",Z]]);var ae=le;const oe=(0,l.Lk)("button",{type:"button",class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#B_MenuPlus"}," 메뉴 추가하기 ",-1),ne={class:"modal fade",id:"B_MenuPlus",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},ie={class:"modal-dialog"},de={class:"modal-content"},re=(0,l.Lk)("div",{class:"modal-header"},[(0,l.Lk)("h1",{class:"modal-title fs-5",id:"exampleModalLabel"}," 메뉴 추가하기 "),(0,l.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),ue={class:"modal-body"},ce={class:"mb-2"},me=(0,l.Lk)("label",{for:"menuName",class:"form-label"},"메뉴 이름",-1),he={class:"mb-3"},pe=(0,l.Lk)("label",{for:"menuDescription",class:"form-label"},"메뉴 설명",-1),fe={class:"mb-3"},be=(0,l.Lk)("label",{for:"menuPrice",class:"form-label"},"메뉴 가격",-1),ke={key:0,class:"text-danger"},ge={id:"MenuImg",class:"custom-file"},Le=(0,l.Lk)("label",{class:"custom-file-label",for:"customFile"},[(0,l.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"50",height:"50",fill:"currentColor",class:"bi bi-card-image",viewBox:"0 0 16 16"},[(0,l.Lk)("path",{d:"M6.002 5.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0"}),(0,l.Lk)("path",{d:"M1.5 2A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h13a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2zm13 1a.5.5 0 0 1 .5.5v6l-3.775-1.947a.5.5 0 0 0-.577.093l-3.71 3.71-2.66-1.772a.5.5 0 0 0-.63.062L1.002 12v.54L1 12.5v-9a.5.5 0 0 1 .5-.5z"})])],-1),ve=(0,l.Lk)("br",null,null,-1),ye={id:"imagePreview"},Me=["src"],we={class:"mb-3"},xe=(0,l.Lk)("label",{class:"form-check-label"},"옵션 추가 여부:",-1),Ce={class:"form-check"},_e=(0,l.Lk)("label",{for:"optionYes",class:"form-check-label"},"옵션 추가",-1),Ue={class:"form-check"},Ee=(0,l.Lk)("label",{for:"optionNo",class:"form-check-label"},"옵션 추가 안 함",-1),Ie={class:"modal-footer"},Be=(0,l.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1),Ae=["disabled"];function De(e,t,s,a,n,i){return(0,l.uX)(),(0,l.CE)("div",null,[oe,(0,l.Lk)("div",ne,[(0,l.Lk)("div",ie,[(0,l.Lk)("div",de,[re,(0,l.Lk)("div",ue,[(0,l.Lk)("form",{onSubmit:t[7]||(t[7]=(0,o.D$)(((...e)=>i.saveChanges&&i.saveChanges(...e)),["prevent"]))},[(0,l.Lk)("div",ce,[me,(0,l.bo)((0,l.Lk)("input",{type:"text",class:"form-control",id:"menuName","onUpdate:modelValue":t[0]||(t[0]=e=>n.fname=e),required:""},null,512),[[o.Jo,n.fname]])]),(0,l.Lk)("div",he,[pe,(0,l.bo)((0,l.Lk)("textarea",{class:"form-control",id:"menuDescription","onUpdate:modelValue":t[1]||(t[1]=e=>n.finfo=e),required:""},null,512),[[o.Jo,n.finfo]])]),(0,l.Lk)("div",fe,[be,(0,l.bo)((0,l.Lk)("input",{type:"text",class:"form-control",id:"menuPrice","onUpdate:modelValue":t[2]||(t[2]=e=>n.fprice=e),required:"",pattern:"[0-9,]+",onInput:t[3]||(t[3]=(...e)=>i.checkIfNumber&&i.checkIfNumber(...e))},null,544),[[o.Jo,n.fprice]]),n.isNumber?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)("div",ke," 숫자만 입력해주세요. "))]),(0,l.Lk)("div",ge,[(0,l.Lk)("input",{id:"customFile",type:"file",ref:"image",onChange:t[4]||(t[4]=(...e)=>i.upload&&i.upload(...e))},null,544),Le]),ve,(0,l.Lk)("div",ye,[n.imageUrl?((0,l.uX)(),(0,l.CE)("img",{key:0,src:n.imageUrl,class:"rounded mx-auto d-block",style:{"max-width":"100%","max-height":"300px"}},null,8,Me)):(0,l.Q3)("",!0)]),(0,l.Lk)("div",we,[xe,(0,l.Lk)("div",Ce,[(0,l.bo)((0,l.Lk)("input",{type:"radio",id:"optionYes",class:"form-check-input","onUpdate:modelValue":t[5]||(t[5]=e=>n.foption=e),value:"1"},null,512),[[o.XL,n.foption]]),_e]),(0,l.Lk)("div",Ue,[(0,l.bo)((0,l.Lk)("input",{type:"radio",id:"optionNo",class:"form-check-input","onUpdate:modelValue":t[6]||(t[6]=e=>n.foption=e),value:"2"},null,512),[[o.XL,n.foption]]),Ee])])],32)]),(0,l.Lk)("div",Ie,[Be,(0,l.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t[8]||(t[8]=(...e)=>i.saveChanges&&i.saveChanges(...e)),disabled:!n.isNumber}," Save changes ",8,Ae)])])])],512)])}var Ne={name:"B_MenuPlusMD",props:["bnum","fnum"],data(){return{fname:"",finfo:"",fprice:"",foption:"2",isNumber:!0,image:null,imageUrl:null}},methods:{checkIfNumber(){const e=this.fprice.replace(/\D/g,"");this.fprice=Number(e).toLocaleString(),this.isNumber=/^[0-9,]+$/.test(e)},async saveChanges(){if(!this.isNumber)return;const e={fname:this.fname,finfo:this.finfo,fprice:this.fprice.replace(/,/g,""),foption:this.foption,bnum:this.bnum,fimg:this.imageUrl};ee.A.post("/MenuInsert",e,{}).then((e=>{console.log("메뉴 추가 성공:",e.data),window.location.reload()})).catch((e=>{console.error("메뉴 추가 실패:",e)}))},async upload(){if(this.image=this.$refs.image.files[0],console.log(this.image),!this.image)return;const e=new FileReader;e.onload=e=>{this.imageUrl=e.target.result},e.readAsDataURL(this.image)}}};const Pe=(0,se.A)(Ne,[["render",De]]);var Xe=Pe,Ve={name:"B_ShopRevise",components:{B_MenuPlusMD:Xe,B_MenuPluse:ae},data(){return{shop:[]}},created(){this.mnum=this.getUserMnum,this.fetchStoreInfo(this.mnum)},computed:{...(0,N.L8)(["getUserMnum"])},methods:{fetchStoreInfo(){console.log("bnum:",this.shop.bnum),ee.A.get(`/B_ShopDetail?mnum=${this.getUserMnum}`).then((e=>{0===e.data.length?(alert("가게 정보가 존재하지 않습니다. 가게를 등록해주세요!"),this.$router.push("/business/Files")):(this.shop=e.data,this.shop.bnum=e.data.bnum,console.log("bnum:",this.shop.bnum))})).catch((e=>{console.error("가게 정보 가져오기 실패:",e)}))},submitForm(){const e={mnum:this.mnum,start_time:this.shop.start_time,end_time:this.shop.end_time};ee.A.post("/B_ShopTimeUpdate",e).then((e=>{console.log("서버 응답:",e.data)})).catch((e=>{console.error("서버 요청 실패:",e)}))}}};const Fe=(0,se.A)(Ve,[["render",D]]);var Se=Fe}}]);
//# sourceMappingURL=595.76e1fadb.js.map