<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.dutchOrder.server.dao.JhRegisterDao">
	<!-- 회원가입 -->
    <insert id="insert">
    INSERT INTO member (
    mnum, memail, mpw, mname, mtel, mnic, 
    mgroup_mikey, mgroup_makey, mstatus_mikey, mstatus_makey, hiredate
	)
	VALUES (
    (SELECT COALESCE(MAX(a.mnum), 1000) + 1 FROM member a),
    #{memail}, #{mpw}, #{mname}, #{mtel}, #{mnic}, 
    #{mgroup_mikey}, #{mgroup_makey}, #{mstatus_mikey}, #{mstatus_makey}, CURRENT_DATE
	);

	</insert>
	

	<select id="existsByNickname"  parameterType="String" resultType="boolean">
		SELECT COUNT(*) > 0
    	FROM member
    	WHERE mnic = #{mnic}
	</select>

</mapper>

